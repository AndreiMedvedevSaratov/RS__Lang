{"remainingRequest":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\thread-loader\\dist\\cjs.js!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\babel-loader\\lib\\index.js!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\components\\english-puzzle.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\components\\english-puzzle.vue","mtime":1594840978197},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L1JTL1JlcG9zaXRhcmllcy9SUy1MYW5nL3JzbGFuZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkY6L1JTL1JlcG9zaXRhcmllcy9SUy1MYW5nL3JzbGFuZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgc2V0dGluZyBmcm9tICdAL2Fzc2V0cy9qcy9taXhpblNldHRpbmcnOwppbXBvcnQgYWxlcnQgZnJvbSAnQC9hc3NldHMvanMvbWl4aW5BbGVydCc7CmltcG9ydCB2TW9kYWwgZnJvbSAnLi9tb2RhbC9Nb2RhbFNob3J0U3RhdC52dWUnOwppbXBvcnQgdkFsZXJ0IGZyb20gJy4vbW9kYWwvTW9kYWxBbGVydC52dWUnOwovKioNCiAqIEFQSSBWdWUNCiAqIGh0dHBzOi8vcnUudnVlanMub3JnL3YyL2FwaS9pbmRleC5odG1sDQogKi8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRW5nbGlzaFB1enpsZScsCiAgY29tcG9uZW50czogewogICAgdk1vZGFsOiB2TW9kYWwsCiAgICB2QWxlcnQ6IHZBbGVydAogIH0sCiAgbWl4aW5zOiBbc2V0dGluZywgYWxlcnRdLAogIHByb3BzOiBbXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbnVtOiAwLAogICAgICB3b3JkUmlnaHQ6IG51bGwsCiAgICAgIG1vdmVZOiAwLAogICAgICBnYW1lU3RhdHVzOiBmYWxzZSwKICAgICAgaW1nU3JjOiAwLAogICAgICBhcnI6IG51bGwsCiAgICAgIGJvb2xlYW5Gb3JDaGVjazogZmFsc2UsCiAgICAgIHNlbGVjdGVkX2xldmVsOiAwLAogICAgICBzZWxlY3RlZF9wYWdlOiAwLAogICAgICBjb250aW51ZUNvdW50OiAwLAogICAgICBuYW1lR2FsbGVyeTogWyfQmNCy0LDQvSDQkNC50LLQsNC30L7QstGB0LrQuNC5IC0g0JTQtdCy0Y/RgtGL0Lkg0LLQsNC7ICgxODUwINCzLiknLCAn0JjQstCw0L0g0KjQuNGI0LrQuNC9IC0g0KPRgtGA0L4g0LIg0YHQvtGB0L3QvtCy0L7QvCDQu9C10YHRgyAoMTg4OSDQsy4pJywgJ9Ca0LDRgNC7INCR0YDRjtC70LvQvtCyIC0g0J/QvtGB0LvQtdC00L3QuNC5INC00LXQvdGMINCf0L7QvNC/0LXQuCAoMTgzMyDQsy4pJywgJ9CQ0LvQtdC60YHQtdC5INCh0LDQstGA0LDRgdC+0LIgLSDQn9C70L7RgtGLICgxODY4INCzLiknLCAn0JDQu9C10LrRgdC10Lkg0KHQsNCy0YDQsNGB0L7QsiAtINCT0YDQsNGH0Lgg0L/RgNC40LvQtdGC0LXQu9C4ICgxODcxINCzLiknLCAn0JjQu9GM0Y8g0KDQtdC/0LjQvSAtINCR0YPRgNC70LDQutC4INC90LAg0JLQvtC70LPQtSAoMTg3MCAtIDE4NzMg0LPQsy4pJywgJ9CY0LLQsNC9INCo0LjRiNC60LjQvSAtINCg0L7QttGMICgxODc4INCzLiknXSwKICAgICAgY29ycmVjdFdvcmRzOiBbXSwKICAgICAgd3JvbmdXb3JkczogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyh7CiAgICB3b3JkczogJ2dldFdvcmRzJywKICAgIHVybEZpbGVzOiAnZ2V0VXJsRmlsZXMnLAogICAgZ2V0U2hvcnRTdGF0aXN0aWNzOiAnc2hvd1Nob3J0U3RhdGlzdGljcycKICB9KSksIHt9LCB7CiAgICBzaG93U3RhdGlzdGljczogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRTaG9ydFN0YXRpc3RpY3M7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KCkgewogICAgICAgIHRoaXMub2ZmU3RhdGlzdGljcygpOwogICAgICB9CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIHNlbGVjdGVkX2xldmVsOiBmdW5jdGlvbiBzZWxlY3RlZF9sZXZlbCgpIHsKICAgICAgdGhpcy53YXRjaF9sb2FkX2dhbWUoKTsKICAgIH0sCiAgICBzZWxlY3RlZF9wYWdlOiBmdW5jdGlvbiBzZWxlY3RlZF9wYWdlKCkgewogICAgICB0aGlzLndhdGNoX2xvYWRfZ2FtZSgpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIC8vINCX0LDQv9GD0YHQutCw0LXQvCDQv9GA0L7RgdC70YPRiNC40LLQsNGC0LXQu9GMICjQsiBiZWZvcmVEZXN0cm95INGD0LTQsNC70LjRgtGMINC90LDQtNC+KQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZXllcywgewogICAgICBjYXB0dXJlOiB0cnVlCiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvY2FsKCk7CiAgICB0aGlzLmNoZWNrU2V0dGluZygpOwogICAgdGhpcy5hcHBIdG1sKFt7CiAgICAgIG9uZTogJ21haW4nLAogICAgICBrZXk6ICdkcmF3ZXInLAogICAgICB2YWx1ZTogZmFsc2UKICAgIH0sIHsKICAgICAgb25lOiAnbWFpbicsCiAgICAgIGtleTogJ2JyZWFkY3J1bWJzJywKICAgICAgdmFsdWU6IGZhbHNlCiAgICB9LCB7CiAgICAgIG9uZTogJ2FwcCcsCiAgICAgIGtleTogJ2JhY2tncm91bmQnLAogICAgICB2YWx1ZTogJ2xpZ2h0LWdyZWVuIGRhcmtlbi00JwogICAgfSwgewogICAgICBvbmU6ICdhcHAnLAogICAgICBrZXk6ICdjb2xvcldoaXRlJywKICAgICAgdmFsdWU6IHRydWUKICAgIH1dKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLmFwcEh0bWwoW3sKICAgICAgb25lOiAnbWFpbicsCiAgICAgIGtleTogJ2RyYXdlcicsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9LCB7CiAgICAgIG9uZTogJ21haW4nLAogICAgICBrZXk6ICdicmVhZGNydW1icycsCiAgICAgIHZhbHVlOiB0cnVlCiAgICB9LCB7CiAgICAgIG9uZTogJ2FwcCcsCiAgICAgIGtleTogJ2JhY2tncm91bmQnLAogICAgICB2YWx1ZTogJ2dyZXkgbGlnaHRlbi01JwogICAgfSwgewogICAgICBvbmU6ICdhcHAnLAogICAgICBrZXk6ICdjb2xvcldoaXRlJywKICAgICAgdmFsdWU6IGZhbHNlCiAgICB9XSk7IC8vINCj0LTQsNC70Y/QtdC8INC/0YDQvtGB0LvRg9GI0LjQstCw0YLQtdC70YwsINGH0YLQviDQsdGLINC+0L0g0L3QtSDRgNCw0YHQv9GA0L7RgdGC0YDQsNC90Y/Qu9GB0Y8g0L3QsCDQtNGA0YPQs9C40LUg0LrQvtC80L/QvtC90LXQvdGC0YsKCiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5leWVzLCB7CiAgICAgIGNhcHR1cmU6IHRydWUKICAgIH0pOwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyh7CiAgICBhcHBIdG1sOiAnRURJVF9IVE1MJywKICAgIG9mZlN0YXRpc3RpY3M6ICdTSE9XX1NIT1JUX1NUQVRJU1RJQ1MnCiAgfSkpLCBtYXBBY3Rpb25zKHsKICAgIHdvcmRzQWN0aW9uOiAnQVBQX0dFVF9VU0VSX1dPUkRTX0FHR1JFR0FURUQnLAogICAgYWxlcnRBY3Rpb246ICdBTEVSVCcsCiAgICB3b3JkUHJvY2Vzc2luZzogJ0FQUF9XT1JEX1BST0NFU1NJTkcnCiAgfSkpLCB7fSwgewogICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQuNC1INC90LDRgdGC0YDQvtC50LrQuCDQvdCwINGC0YDQtdCx0L7QstCw0L3QuNGPINC40LPRgNGLCiAgICBjaGVja1NldHRpbmc6IGZ1bmN0aW9uIGNoZWNrU2V0dGluZygpIHsKICAgICAgaWYgKHRoaXMud29yZHNQZXJEYXkgPj0gMTAgJiYgdGhpcy5zaG93VGV4dEV4YW1wbGUpIHsKICAgICAgICB0aGlzLmdhbWUoKTsKICAgICAgfSBlbHNlIHRoaXMuc2hvd0FsZXJ0ID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDQn9GA0LjQvNC10L3Rj9C10Lwg0L3QsNGB0YLRgNC+0LnQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQv9C+0YHQu9C1INGB0L7Qs9C70LDRgdC40Y8KICAgIGNvbnNlbnRUb1Rlcm1zOiBmdW5jdGlvbiBjb25zZW50VG9UZXJtcygpIHsKICAgICAgdGhpcy5zaG93VGV4dEV4YW1wbGUgPSB0cnVlOwogICAgICB0aGlzLndvcmRzUGVyRGF5ID0gMTA7CiAgICAgIHRoaXMuc2hvd0FsZXJ0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2V0R2V0U2V0dGluZyh7CiAgICAgICAgbWV0aG9kOiAncHV0JwogICAgICB9KTsKICAgICAgdGhpcy5nYW1lKCk7CiAgICB9LAogICAgZXllczogZnVuY3Rpb24gZXllcyhldmVudCkgewogICAgICB2YXIgeCA9IGV2ZW50LngsCiAgICAgICAgICB5ID0gZXZlbnQueTsKICAgICAgdmFyIGxlZnQgPSArZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpcmNsZS1wdXp6bGUnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0OwogICAgICB2YXIgdG9wID0gK2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXJjbGUtcHV6emxlJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2lyY2xlLXB1enpsZScpLnN0eWxlLnRyYW5zZm9ybSA9ICJyb3RhdGUoIi5jb25jYXQodGhpcy5hcmN0Zyh4IC0gbGVmdCAtIDIwLCB5IC0gdG9wIC0gMjApLCAiZGVnKSIpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2lyY2xlLXB1enpsZS1vbmUnKS5zdHlsZS50cmFuc2Zvcm0gPSAicm90YXRlKCIuY29uY2F0KHRoaXMuYXJjdGcoeCAtIGxlZnQgLSAyMCwgeSAtIHRvcCAtIDIwKSwgImRlZykiKTsKICAgIH0sCiAgICBhcmN0ZzogZnVuY3Rpb24gYXJjdGcoeCwgeSkgewogICAgICB2YXIgYSA9IG51bGw7CgogICAgICBpZiAoeCA+IDAgJiYgeSA+IDApIHsKICAgICAgICBhID0gTWF0aC5QSSAvIDIgLSBNYXRoLmF0YW4oeCAvIHkpOwogICAgICB9CgogICAgICBpZiAoeCA8IDAgJiYgeSA+IDApIHsKICAgICAgICBhID0gTWF0aC5QSSAvIDIgLSBNYXRoLmF0YW4oeCAvIHkpOwogICAgICB9CgogICAgICBpZiAoeCA8IDAgJiYgeSA8IDApIHsKICAgICAgICBhID0gTWF0aC5QSSArIE1hdGguYXRhbih5IC8geCk7CiAgICAgIH0KCiAgICAgIGlmICh4ID4gMCAmJiB5IDwgMCkgewogICAgICAgIGEgPSAzICogKE1hdGguUEkgLyAyKSArIE1hdGguYWJzKE1hdGguYXRhbih4IC8geSkpOwogICAgICB9CgogICAgICByZXR1cm4gYSAqIDU3LjI5NTg7CiAgICB9LAogICAgZ2FtZTogZnVuY3Rpb24gZ2FtZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHdpZHRoUHgsIHNvcnRBcnIsIGNsZWFyV29yZHMsIF90aGlzJCRyZWZzLCBiZWdpbldvcmQsIHdvcmRDb250YWluZXIsIHN0ciwgYXJyV29yZCwgY291bnRXb3JkcywgaSwgZGl2LCBfaSwgX2RpdiwgX2kyLCBfZGl2Miwgd29yZEFsbCwgc3VtV2lkdGgsIG1hcCwgX2kzLCB3aWR0aCwgX2k0LCBpbWcsIF9pNSwgX2k2LCBtb3ZlWCwgX2k3LCB5LCBzb3J0WSwgc3RyUiwgX2k4LCBuZXdBcnIsIF9pOSwgZ2lnRW5kLCBuZXdXb3JkQWxsLCBfaTEwLCBfbG9vcCwgX2kxMSwgX2xvb3AyLCBfaTEyLCBkcmFnU3RhcnQsIGRyYWdFbmQsIGRyYWdPdmVyLCBkcmFnRW50ZXIsIGRyYWdMZWF2ZSwgdGFyZ2V0LCBydW5SaWdodCwgcnVuTGVmdCwgZHJhZ0Ryb3A7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRyYWdEcm9wID0gZnVuY3Rpb24gX2RyYWdEcm9wKCkgewogICAgICAgICAgICAgICAgICBydW5SaWdodCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBydW5MZWZ0ID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTEzID0gMDsgX2kxMyA8IGdpZ0VuZC5sZW5ndGg7IF9pMTMgKz0gMSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzID09PSBnaWdFbmRbX2kxM10pIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChnaWdFbmRbX2kxM10uaW5uZXJIVE1MKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpcnN0Q2hpbGQgPT09IHRhcmdldCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2kxMyAhPT0gMCAmJiBnaWdFbmRbX2kxMyAtIDFdLmZpcnN0RWxlbWVudENoaWxkID09PSB0YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGdpZ0VuZFtfaTEzXS5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX2kxM10uaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ0VuZFtfaTEzIC0gMV0uYXBwZW5kKGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX2kxM10uYXBwZW5kKHRhcmdldCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Fyci5zcGxpY2UoW19pMTNdLCAxLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBcnIuc3BsaWNlKFtfaTEzICsgMV0sIDEsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9pMTMgIT09IGdpZ0VuZC5sZW5ndGggLSAxICYmIGdpZ0VuZFtfaTEzICsgMV0uZmlyc3RFbGVtZW50Q2hpbGQgPT09IHRhcmdldCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IGdpZ0VuZFtfaTEzXS5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX2kxM10uaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ0VuZFtfaTEzICsgMV0uYXBwZW5kKF9hKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW19pMTNdLmFwcGVuZCh0YXJnZXQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdBcnIuc3BsaWNlKFtfaTEzXSwgMSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXJyLnNwbGljZShbX2kxMyArIDFdLCAxLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gX2kxMzsgaiA8IGdpZ0VuZC5sZW5ndGg7IGogKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnaWdFbmRbal0uaW5uZXJIVE1MKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1blJpZ2h0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSBfaTEzOyBrID49IDA7IGsgLT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnaWdFbmRba10uaW5uZXJIVE1MKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkxlZnQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFydW5SaWdodCAmJiAhcnVuTGVmdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCBnaWdFbmQubGVuZ3RoOyBoICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gZ2lnRW5kW2hdLmZpcnN0RWxlbWVudENoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcSA9IDA7IHEgPCBnaWdFbmQubGVuZ3RoOyBxICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzID09PSBnaWdFbmRbcV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGggPiBxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hMiA9IGdpZ0VuZFtoXS5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGdpZ0VuZFtxXS5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbaF0uaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW3FdLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ0VuZFtxXS5hcHBlbmQoX2EyKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcCA9IHEgKyAxOyBwIDw9IGg7IHAgKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBnaWdFbmRbcF0uZmlyc3RFbGVtZW50Q2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbcF0uaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbcF0uYXBwZW5kKGIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaCA8IHEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EzID0gZ2lnRW5kW2hdLmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYiA9IGdpZ0VuZFtxXS5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbaF0uaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW3FdLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ0VuZFtxXS5hcHBlbmQoX2EzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX3AgPSBxIC0gMTsgX3AgPj0gaDsgX3AgLT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jID0gZ2lnRW5kW19wXS5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ0VuZFtfcF0uaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW19wXS5hcHBlbmQoX2IpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gX2M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVuUmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTQgPSBnaWdFbmRbX2kxM10uZmlyc3RFbGVtZW50Q2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX2kxM10uaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW19pMTNdLmFwcGVuZCh0YXJnZXQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9wMiA9IF9pMTMgKyAxOyBfcDIgPCBnaWdFbmQubGVuZ3RoOyBfcDIgKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2lnRW5kW19wMl0uaW5uZXJIVE1MKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9jMiA9IGdpZ0VuZFtfcDJdLmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ0VuZFtfcDJdLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX3AyXS5hcHBlbmQoX2E0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXJyLnNwbGljZShbX3AyXSwgMSwgMSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3QXJyLmluY2x1ZGVzKDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19jaGVjay1wdXp6bGUnKS5jbGFzc0xpc3QuYWRkKCd2aXNpYmJsZS1idG4tcHV6emxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYTQgPSBfYzI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW19wMl0uYXBwZW5kKF9hNCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Fyci5zcGxpY2UoW19wMl0sIDEsIDEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld0Fyci5pbmNsdWRlcygwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9fY2hlY2stcHV6emxlJykuY2xhc3NMaXN0LmFkZCgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdBcnIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bkxlZnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTUgPSBnaWdFbmRbX2kxM10uZmlyc3RFbGVtZW50Q2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX2kxM10uaW5uZXJIVE1MID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW19pMTNdLmFwcGVuZCh0YXJnZXQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9wMyA9IF9pMTMgLSAxOyBfcDMgPj0gMDsgX3AzIC09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdpZ0VuZFtfcDNdLmlubmVySFRNTCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYzMgPSBnaWdFbmRbX3AzXS5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX3AzXS5pbm5lckhUTUwgPSAnJzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW19wM10uYXBwZW5kKF9hNSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3QXJyLmluY2x1ZGVzKDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19jaGVjay1wdXp6bGUnKS5jbGFzc0xpc3QuYWRkKCd2aXNpYmJsZS1idG4tcHV6emxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYTUgPSBfYzM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lnRW5kW19wM10uYXBwZW5kKF9hNSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Fyci5zcGxpY2UoW19wM10sIDEsIDEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld0Fyci5pbmNsdWRlcygwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9fY2hlY2stcHV6emxlJykuY2xhc3NMaXN0LmFkZCgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3QXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld0Fycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBnaWdFbmRbX2kxM10uYXBwZW5kKHRhcmdldCk7CgogICAgICAgICAgICAgICAgICAgICAgICBuZXdBcnIuc3BsaWNlKFtfaTEzXSwgMSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTE0ID0gMDsgX2kxNCA8IGdpZ0VuZC5sZW5ndGg7IF9pMTQgKz0gMSkgewogICAgICAgICAgICAgICAgICAgIGlmICghZ2lnRW5kW19pMTRdLmlubmVySFRNTCkgewogICAgICAgICAgICAgICAgICAgICAgbmV3QXJyLnNwbGljZShbX2kxNF0sIDEsIDApOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdBcnIuaW5jbHVkZXMoMCkpIHsKICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fX2NoZWNrLXB1enpsZScpLmNsYXNzTGlzdC5hZGQoJ3Zpc2liYmxlLWJ0bi1wdXp6bGUnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gLy8gdGhpcy5hcHBlbmQodGFyZ2V0KQoKCiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZC1wdXp6bGUnKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGRyYWdMZWF2ZSA9IGZ1bmN0aW9uIF9kcmFnTGVhdmUoKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaG92ZXJlZC1wdXp6bGUnKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZHJhZ0VudGVyID0gZnVuY3Rpb24gX2RyYWdFbnRlcigpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdob3ZlcmVkLXB1enpsZScpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBkcmFnT3ZlciA9IGZ1bmN0aW9uIF9kcmFnT3ZlcihldmVudCkgewogICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBkcmFnRW5kID0gZnVuY3Rpb24gX2RyYWdFbmQoKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZS1wdXp6bGUnKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gX2RyYWdTdGFydCgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIuY2xhc3NMaXN0LmFkZCgnaGlkZS1wdXp6bGUnKTsKICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsZXZlbCcsIF90aGlzLnNlbGVjdGVkX2xldmVsKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYWdlJywgX3RoaXMuc2VsZWN0ZWRfcGFnZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMud29yZHNBY3Rpb24oewogICAgICAgICAgICAgICAgICBncm91cDogX3RoaXMuc2VsZWN0ZWRfbGV2ZWwsCiAgICAgICAgICAgICAgICAgIHBhZ2U6IF90aGlzLnNlbGVjdGVkX3BhZ2UsCiAgICAgICAgICAgICAgICAgIGZpbHRlcjogewogICAgICAgICAgICAgICAgICAgICRvcjogW3sKICAgICAgICAgICAgICAgICAgICAgIHVzZXJXb3JkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICRuZTogbnVsbAogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgIHVzZXJXb3JkOiBudWxsCiAgICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpcy5nYW1lU3RhdHVzID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICB3aWR0aFB4ID0gZnVuY3Rpb24gd2lkdGhQeChzdHIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICtzdHIubWF0Y2goL1swLTldL2cpLmpvaW4oJycpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBzb3J0QXJyID0gZnVuY3Rpb24gc29ydEFycihhcnIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyci5zb3J0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGNsZWFyV29yZHMgPSBmdW5jdGlvbiBjbGVhcldvcmRzKHN0cmluZykgewogICAgICAgICAgICAgICAgICB2YXIgbmV3U3RyID0gJyc7CiAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBzdHJpbmcudHJpbSgpOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RyW2ldID09PSAnLCcpIHsKICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChzdHJbaV0gPT09ICc8JyB8fCBzdHJbaV0gPT09ICcsJykgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN0cltpXSAhPT0gJz4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0cltpXSA9PT0gJy4nICYmIGkgKyAxID09PSBzdHIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U3RyOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyW2ldID09PSAnLicgJiYgc3RyW2kgKyAxXSAhPT0gJyAnIHx8IHN0cltpXSA9PT0gJy4nICYmIHN0cltpICsgMV0gPT09ICcgJykgewogICAgICAgICAgICAgICAgICAgICAgbmV3U3RyICs9IHN0cltpXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgbmV3U3RyICs9IHN0cltpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTdHI7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF90aGlzJCRyZWZzID0gX3RoaXMuJHJlZnMsIGJlZ2luV29yZCA9IF90aGlzJCRyZWZzLmJlZ2luV29yZCwgd29yZENvbnRhaW5lciA9IF90aGlzJCRyZWZzLndvcmRDb250YWluZXI7CiAgICAgICAgICAgICAgICBzdHIgPSBfdGhpcy53b3Jkc1tfdGhpcy5udW1dLnRleHRFeGFtcGxlOwogICAgICAgICAgICAgICAgYXJyV29yZCA9IGNsZWFyV29yZHMoc3RyKS5zcGxpdCgnICcpOwogICAgICAgICAgICAgICAgX3RoaXMuYXJyID0gYXJyV29yZDsKICAgICAgICAgICAgICAgIGNvdW50V29yZHMgPSBfdGhpcy5hcnIubGVuZ3RoOwogICAgICAgICAgICAgICAgd29yZENvbnRhaW5lcltfdGhpcy5udW1dLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudFdvcmRzOyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAiZ2lnLXB1enpsZSBnaWdfZW5kLXB1enpsZSIuY29uY2F0KF90aGlzLm51bSk7CgogICAgICAgICAgICAgICAgICB3b3JkQ29udGFpbmVyW190aGlzLm51bV0uYXBwZW5kKGRpdik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYmVnaW5Xb3JkLmlubmVySFRNTCA9ICcnOwoKICAgICAgICAgICAgICAgIGZvciAoX2kgPSAwOyBfaSA8IGNvdW50V29yZHM7IF9pICs9IDEpIHsKICAgICAgICAgICAgICAgICAgX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgICBfZGl2LmNsYXNzTmFtZSA9ICJnaWctcHV6emxlIGdpZ19iZWdpbi1wdXp6bGUiLmNvbmNhdChfdGhpcy5udW0pOwogICAgICAgICAgICAgICAgICBiZWdpbldvcmQuYXBwZW5kKF9kaXYpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZvciAoX2kyID0gMDsgX2kyIDwgY291bnRXb3JkczsgX2kyICs9IDEpIHsKICAgICAgICAgICAgICAgICAgX2RpdjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgX2RpdjIuaW5uZXJIVE1MID0gIiIuY29uY2F0KF90aGlzLmFycltfaTJdKTsKICAgICAgICAgICAgICAgICAgX2RpdjIuY2xhc3NOYW1lID0gIndvcmQtcHV6emxlIHdvcmQtcHV6emxlIi5jb25jYXQoX3RoaXMubnVtKTsKCiAgICAgICAgICAgICAgICAgIF9kaXYyLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZ2lnX2JlZ2luLXB1enpsZSIuY29uY2F0KF90aGlzLm51bSkpW19pMl0uYXBwZW5kKF9kaXYyKTsKICAgICAgICAgICAgICAgIH0gLy8gQXJyYXkgZGl2IHdvcmQKCgogICAgICAgICAgICAgICAgd29yZEFsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi53b3JkLXB1enpsZSIuY29uY2F0KF90aGlzLm51bSkpOwogICAgICAgICAgICAgICAgX3RoaXMud29yZFJpZ2h0ID0gd29yZEFsbDsKICAgICAgICAgICAgICAgIHN1bVdpZHRoID0gMDsKICAgICAgICAgICAgICAgIG1hcCA9IG5ldyBNYXAoKTsKCiAgICAgICAgICAgICAgICBmb3IgKF9pMyA9IDA7IF9pMyA8IGNvdW50V29yZHM7IF9pMyArPSAxKSB7CiAgICAgICAgICAgICAgICAgIHdpZHRoID0gd29yZEFsbFtfaTNdLm9mZnNldFdpZHRoOwogICAgICAgICAgICAgICAgICBtYXAuc2V0KCIiLmNvbmNhdChfaTMpLCAiIi5jb25jYXQod2lkdGgpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKF9pNCA9IDA7IF9pNCA8IGNvdW50V29yZHM7IF9pNCArPSAxKSB7CiAgICAgICAgICAgICAgICAgIHdvcmRBbGxbX2k0XS5zdHlsZS53aWR0aCA9ICIiLmNvbmNhdChtYXAuZ2V0KCIiLmNvbmNhdChfaTQpKSwgInB4Iik7CiAgICAgICAgICAgICAgICAgIHN1bVdpZHRoICs9ICttYXAuZ2V0KCIiLmNvbmNhdChfaTQpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3VtV2lkdGggPiA5MDApIHsKICAgICAgICAgICAgICAgICAgc3VtV2lkdGggLT0gOTAwOwogICAgICAgICAgICAgICAgICB3b3JkQWxsW3dvcmRBbGwubGVuZ3RoIC0gMV0uc3R5bGUud2lkdGggPSAiIi5jb25jYXQoK21hcC5nZXQoIiIuY29uY2F0KHdvcmRBbGwubGVuZ3RoIC0gMSkpIC0gc3VtV2lkdGgsICJweCIpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdW1XaWR0aCA8IDkwMCkgewogICAgICAgICAgICAgICAgICBzdW1XaWR0aCA9IDkwMCAtIHN1bVdpZHRoOwogICAgICAgICAgICAgICAgICB3b3JkQWxsW3dvcmRBbGwubGVuZ3RoIC0gMV0uc3R5bGUud2lkdGggPSAiIi5jb25jYXQoK21hcC5nZXQoIiIuY29uY2F0KHdvcmRBbGwubGVuZ3RoIC0gMSkpICsgc3VtV2lkdGgsICJweCIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaW1nJykpIHsKICAgICAgICAgICAgICAgICAgaW1nID0gK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdpbWcnKTsKICAgICAgICAgICAgICAgICAgX3RoaXMuaW1nU3JjID0gaW1nOwoKICAgICAgICAgICAgICAgICAgZm9yIChfaTUgPSAwOyBfaTUgPCBjb3VudFdvcmRzOyBfaTUgKz0gMSkgewogICAgICAgICAgICAgICAgICAgIHdvcmRBbGxbX2k1XS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAidXJsKC4vYXNzZXRzL2ltZy8iLmNvbmNhdChpbWcsICIuanBnKSIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBmb3IgKF9pNiA9IDA7IF9pNiA8IGNvdW50V29yZHM7IF9pNiArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgd29yZEFsbFtfaTZdLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICJ1cmwoLi9hc3NldHMvaW1nLyIuY29uY2F0KF90aGlzLmltZ1NyYywgIi5qcGcpIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBtb3ZlWCA9IDA7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLm51bSA+IDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92ZVkgLT0gNDU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yIChfaTcgPSAwOyBfaTcgPCBjb3VudFdvcmRzOyBfaTcgKz0gMSkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubnVtID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9pNyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgd29yZEFsbFtfaTddLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICIiLmNvbmNhdChtb3ZlWCwgInB4ICIpLmNvbmNhdChfdGhpcy5tb3ZlWSwgInB4Iik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfaTcgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgIG1vdmVYIC09IHdpZHRoUHgod29yZEFsbFtfaTcgLSAxXS5zdHlsZS53aWR0aCk7CiAgICAgICAgICAgICAgICAgICAgICB3b3JkQWxsW19pN10uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gIiIuY29uY2F0KG1vdmVYLCAicHggIikuY29uY2F0KF90aGlzLm1vdmVZLCAicHgiKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgbW92ZVggLT0gd2lkdGhQeCh3b3JkQWxsW19pNyAtIDFdLnN0eWxlLndpZHRoKTsKICAgICAgICAgICAgICAgICAgICAgIHdvcmRBbGxbX2k3XS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAiIi5jb25jYXQobW92ZVgsICJweCAiKS5jb25jYXQoX3RoaXMubW92ZVksICJweCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm51bSA+IDApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX2k3ID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICB3b3JkQWxsW19pN10uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gIiIuY29uY2F0KG1vdmVYLCAicHggIikuY29uY2F0KF90aGlzLm1vdmVZLCAicHgiKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9pNyA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgbW92ZVggLT0gd2lkdGhQeCh3b3JkQWxsW19pNyAtIDFdLnN0eWxlLndpZHRoKTsKICAgICAgICAgICAgICAgICAgICAgIHdvcmRBbGxbX2k3XS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAiIi5jb25jYXQobW92ZVgsICJweCAiKS5jb25jYXQoX3RoaXMubW92ZVksICJweCIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBtb3ZlWCAtPSB3aWR0aFB4KHdvcmRBbGxbX2k3IC0gMV0uc3R5bGUud2lkdGgpOwogICAgICAgICAgICAgICAgICAgICAgd29yZEFsbFtfaTddLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICIiLmNvbmNhdChtb3ZlWCwgInB4ICIpLmNvbmNhdChfdGhpcy5tb3ZlWSwgInB4Iik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgeSA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmdpZ19iZWdpbi1wdXp6bGUiLmNvbmNhdChfdGhpcy5udW0pKSk7CiAgICAgICAgICAgICAgICBzb3J0WSA9IHNvcnRBcnIoeSk7CiAgICAgICAgICAgICAgICBzdHJSID0gJyc7CgogICAgICAgICAgICAgICAgZm9yIChfaTggPSAwOyBfaTggPCBjb3VudFdvcmRzOyBfaTggKz0gMSkgewogICAgICAgICAgICAgICAgICBzdHJSICs9IHNvcnRZW19pOF0ub3V0ZXJIVE1MOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJlZ2luV29yZC5pbm5lckhUTUwgPSAiIi5jb25jYXQoc3RyUik7CiAgICAgICAgICAgICAgICBuZXdBcnIgPSBbXTsKCiAgICAgICAgICAgICAgICBmb3IgKF9pOSA9IDA7IF9pOSA8IGNvdW50V29yZHM7IF9pOSArPSAxKSB7CiAgICAgICAgICAgICAgICAgIG5ld0Fyci5wdXNoKDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGdpZ0VuZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5naWdfZW5kLXB1enpsZSIuY29uY2F0KF90aGlzLm51bSkpOwogICAgICAgICAgICAgICAgbmV3V29yZEFsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi53b3JkLXB1enpsZSIuY29uY2F0KF90aGlzLm51bSkpOwoKICAgICAgICAgICAgICAgIGZvciAoX2kxMCA9IDA7IF9pMTAgPCBuZXdXb3JkQWxsLmxlbmd0aDsgX2kxMCArPSAxKSB7CiAgICAgICAgICAgICAgICAgIG5ld1dvcmRBbGxbX2kxMF0uY2xhc3NMaXN0LmFkZCgnaW1nLW5vbmUtcHV6emxlJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaTExKSB7CiAgICAgICAgICAgICAgICAgIG5ld1dvcmRBbGxbX2kxMV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5ib29sZWFuRm9yQ2hlY2spIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoIi5naWdfYmVnaW4tcHV6emxlIi5jb25jYXQoX3RoaXMubnVtKSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgbmV3QXJyLmxlbmd0aDsgcCArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdBcnJbcF0gPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZ2lnX2VuZC1wdXp6bGUiLmNvbmNhdChfdGhpcy5udW0pKVtwXS5hcHBlbmQobmV3V29yZEFsbFtfaTExXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXJyLnNwbGljZShbcF0sIDEsIDEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld0Fyci5pbmNsdWRlcygwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9fY2hlY2stcHV6emxlJykuY2xhc3NMaXN0LmFkZCgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoIi5naWdfZW5kLXB1enpsZSIuY29uY2F0KF90aGlzLm51bSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZ2lnX2JlZ2luLXB1enpsZSIuY29uY2F0KF90aGlzLm51bSkpW19pMTFdLmFwcGVuZChuZXdXb3JkQWxsW19pMTFdKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZm9yIChfaTExID0gMDsgX2kxMSA8IG5ld1dvcmRBbGwubGVuZ3RoOyBfaTExICs9IDEpIHsKICAgICAgICAgICAgICAgICAgX2xvb3AoX2kxMSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKF9pMTIpIHsKICAgICAgICAgICAgICAgICAgZ2lnRW5kW19pMTJdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG5ld0Fyci5zcGxpY2UoW19pMTJdLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGZvciAoX2kxMiA9IDA7IF9pMTIgPCBnaWdFbmQubGVuZ3RoOyBfaTEyICs9IDEpIHsKICAgICAgICAgICAgICAgICAgX2xvb3AyKF9pMTIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRhcmdldCA9IG51bGw7CiAgICAgICAgICAgICAgICBydW5SaWdodCA9IGZhbHNlOwogICAgICAgICAgICAgICAgcnVuTGVmdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGdpZ0VuZC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBkcmFnT3Zlcik7CiAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgZHJhZ0VudGVyKTsKICAgICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBkcmFnTGVhdmUpOwogICAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBkcmFnRHJvcCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHdvcmRBbGwuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGRyYWdTdGFydCk7CiAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIGRyYWdFbmQpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZG9udEtub3c6IGZ1bmN0aW9uIGRvbnRLbm93KCkgewogICAgICB0aGlzLmRlbGV0ZWhpbnQoKTsKICAgICAgdmFyIHdvcmRCZWZvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIud29yZC1wdXp6bGUiLmNvbmNhdCh0aGlzLm51bSkpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19jaGVjay1wdXp6bGUnKS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmJsZS1idG4tcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fMScpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzInKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8zJykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fNCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3b3JkQmVmb3JlLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgdGhpcy4kcmVmcy5iZWdpbldvcmQuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmdpZ19lbmQtcHV6emxlIi5jb25jYXQodGhpcy5udW0pKVtpXS5pbm5lckhUTUwgPSAnJzsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kxNSA9IDA7IF9pMTUgPCB3b3JkQmVmb3JlLmxlbmd0aDsgX2kxNSArPSAxKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmdpZ19lbmQtcHV6emxlIi5jb25jYXQodGhpcy5udW0pKVtfaTE1XS5pbm5lckhUTUwgPSB0aGlzLndvcmRSaWdodFtfaTE1XS5vdXRlckhUTUw7CiAgICAgIH0KCiAgICAgIHZhciB3b3JkQWZ0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIud29yZC1wdXp6bGUiLmNvbmNhdCh0aGlzLm51bSkpOwoKICAgICAgZm9yICh2YXIgX2kxNiA9IDA7IF9pMTYgPCB3b3JkQmVmb3JlLmxlbmd0aDsgX2kxNiArPSAxKSB7CiAgICAgICAgd29yZEFmdGVyW19pMTZdLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7CgogICAgICAgIHdvcmRBZnRlcltfaTE2XS5jbGFzc0xpc3QucmVtb3ZlKCdpbWctbm9uZS1wdXp6bGUnKTsKICAgICAgfQoKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9fY29udGludWUtcHV6emxlJykuY2xhc3NMaXN0LmFkZCgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19jaGVjay1wdXp6bGUnKS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmJsZS1idG4tcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fX25vdC1rbm93LXB1enpsZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2liYmxlLWJ0bi1wdXp6bGUnKTsKICAgICAgdGhpcy5hdWRpb2hpbnQoKTsKICAgICAgdGhpcy50ZXh0aGludCgpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzEnKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8yJykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fMycpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzQnKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgdGhpcy5ib29sZWFuRm9yQ2hlY2sgPSBmYWxzZTsKICAgIH0sCiAgICBjaGVjazogZnVuY3Rpb24gY2hlY2soKSB7CiAgICAgIHZhciB3b3JkQmVmb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLndvcmQtcHV6emxlIi5jb25jYXQodGhpcy5udW0pKTsKICAgICAgdmFyIHdvcmRBbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIud29yZC1wdXp6bGUiLmNvbmNhdCh0aGlzLm51bSkpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzEnKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8yJykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fMycpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzQnKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgdmFyIGNvdW50ID0gMDsKCiAgICAgIGlmICh0aGlzLmJvb2xlYW5Gb3JDaGVjaykgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmRCZWZvcmUubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICB3b3JkQmVmb3JlW2ldLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9pMTcgPSAwOyBfaTE3IDwgd29yZEFsbC5sZW5ndGg7IF9pMTcgKz0gMSkgewogICAgICAgIHdvcmRBbGxbX2kxN10uY2xhc3NMaXN0LnJlbW92ZSgncmlnaHQtcHV6emxlJyk7CgogICAgICAgIHdvcmRBbGxbX2kxN10uY2xhc3NMaXN0LnJlbW92ZSgnd3JvbmctcHV6emxlJyk7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIF9pMTggPSAwOyBfaTE4IDwgd29yZEFsbC5sZW5ndGg7IF9pMTggKz0gMSkgewogICAgICAgIGlmICh3b3JkQWxsW19pMThdLmNsb3Nlc3QoIi5naWdfZW5kLXB1enpsZSIuY29uY2F0KHRoaXMubnVtKSkpIHsKICAgICAgICAgIGlmICh3b3JkQWxsW19pMThdLmlubmVySFRNTCA9PT0gdGhpcy5hcnJbX2kxOF0pIHsKICAgICAgICAgICAgd29yZEFsbFtfaTE4XS5jbGFzc0xpc3QuYWRkKCdyaWdodC1wdXp6bGUnKTsKCiAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB3b3JkQWxsW19pMThdLmNsYXNzTGlzdC5hZGQoJ3dyb25nLXB1enpsZScpOwoKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9fbm90LWtub3ctcHV6emxlJykuY2xhc3NMaXN0LmFkZCgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3b3JkQWxsW19pMThdLmNsYXNzTGlzdC5hZGQoJ3dyb25nLXB1enpsZScpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvdW50ID09PSB3b3JkQWxsLmxlbmd0aCkgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl9fY29udGludWUtcHV6emxlJykuY2xhc3NMaXN0LmFkZCgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICAgICAgdGhpcy5zdGF0KHRydWUsIHRoaXMud29yZHNbdGhpcy5udW1dKTsKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHdvcmRCZWZvcmUubGVuZ3RoOyBqICs9IDEpIHsKICAgICAgICAgICAgd29yZEJlZm9yZVtqXS5jbGFzc0xpc3QucmVtb3ZlKCdpbWctbm9uZS1wdXp6bGUnKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmF1ZGlvaGludCgpOwogICAgICAgICAgdGhpcy50ZXh0aGludCgpOwogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8xJykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzInKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fMycpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl80JykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY291bnQgIT09IHdvcmRBbGwubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5zdGF0KGZhbHNlLCB0aGlzLndvcmRzW3RoaXMubnVtXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuYm9vbGVhbkZvckNoZWNrID0gdHJ1ZTsKICAgICAgcmV0dXJuIDE7CiAgICB9LAogICAgY29udGludWVXb3JkOiBmdW5jdGlvbiBjb250aW51ZVdvcmQoKSB7CiAgICAgIHRoaXMuZGVsZXRlaGludCgpOwogICAgICB0aGlzLmNvbnRpbnVlQ291bnQgKz0gMTsKCiAgICAgIGlmICh0aGlzLmNvbnRpbnVlQ291bnQgPT09IDEwKSB7CiAgICAgICAgdmFyIHdvcmRBbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud29yZC1wdXp6bGUnKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3b3JkQWxsLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICB3b3JkQWxsW2ldLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgd29yZEFsbFtpXS5jbGFzc0xpc3QuYWRkKCdib3JkZXItbm9uZS1wdXp6bGUnKTsKICAgICAgICB9CgogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fX2NoZWNrLXB1enpsZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2liYmxlLWJ0bi1wdXp6bGUnKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19yZXN1bHQtcHV6emxlJykuY2xhc3NMaXN0LmFkZCgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iZWdpbi13b3JkLXB1enpsZScpLmlubmVySFRNTCA9IHRoaXMubmFtZUdhbGxlcnlbdGhpcy5pbWdTcmNdOwogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICBpZiAodGhpcy5jb250aW51ZUNvdW50ID09PSAxMSkgewogICAgICAgIGlmICh0aGlzLmltZ1NyYyA8IDYpIHsKICAgICAgICAgIHRoaXMuaW1nU3JjICs9IDE7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaW1nJywgdGhpcy5pbWdTcmMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmltZ1NyYyA9IDA7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaW1nJywgdGhpcy5pbWdTcmMpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb250aW51ZUNvdW50ID0gMDsKCiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRfbGV2ZWwgPT09IDUgJiYgdGhpcy5zZWxlY3RlZF9wYWdlID09PSAyOSkgewogICAgICAgICAgdGhpcy5zZWxlY3RlZF9sZXZlbCA9IDA7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkX3BhZ2UgPSAwOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZF9wYWdlID09PSAyOSkgewogICAgICAgICAgdGhpcy5zZWxlY3RlZF9sZXZlbCArPSAxOwogICAgICAgICAgdGhpcy5zZWxlY3RlZF9wYWdlID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZWxlY3RlZF9wYWdlICs9IDE7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19yZXN1bHQtcHV6emxlJykuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fX2NvbnRpbnVlLXB1enpsZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2liYmxlLWJ0bi1wdXp6bGUnKTsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQoKICAgICAgdGhpcy5ib29sZWFuRm9yQ2hlY2sgPSBmYWxzZTsKICAgICAgdmFyIHdvcmRCZWZvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIud29yZC1wdXp6bGUiLmNvbmNhdCh0aGlzLm51bSkpOwoKICAgICAgZm9yICh2YXIgX2kxOSA9IDA7IF9pMTkgPCB3b3JkQmVmb3JlLmxlbmd0aDsgX2kxOSArPSAxKSB7CiAgICAgICAgdGhpcy4kcmVmcy5iZWdpbldvcmQuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmdpZ19lbmQtcHV6emxlIi5jb25jYXQodGhpcy5udW0pKVtfaTE5XS5pbm5lckhUTUwgPSAnJzsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2kyMCA9IDA7IF9pMjAgPCB3b3JkQmVmb3JlLmxlbmd0aDsgX2kyMCArPSAxKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmdpZ19lbmQtcHV6emxlIi5jb25jYXQodGhpcy5udW0pKVtfaTIwXS5pbm5lckhUTUwgPSB0aGlzLndvcmRSaWdodFtfaTIwXS5vdXRlckhUTUw7CiAgICAgIH0KCiAgICAgIHZhciB3b3JkQWZ0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIud29yZC1wdXp6bGUiLmNvbmNhdCh0aGlzLm51bSkpOwoKICAgICAgZm9yICh2YXIgX2kyMSA9IDA7IF9pMjEgPCB3b3JkQmVmb3JlLmxlbmd0aDsgX2kyMSArPSAxKSB7CiAgICAgICAgd29yZEFmdGVyW19pMjFdLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm51bSA8IDkpIHsKICAgICAgICB0aGlzLm51bSArPSAxOwogICAgICAgIHRoaXMuZ2FtZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZ2FtZVN0YXR1cyA9IGZhbHNlOwogICAgICAgIHRoaXMuYWxlcnRBY3Rpb24oewogICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsCiAgICAgICAgICBkYXRhOiAnR2FtZSBvdmVyJwogICAgICAgIH0pOwogICAgICB9CgogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19jb250aW51ZS1wdXp6bGUnKS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmJsZS1idG4tcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fX2NoZWNrLXB1enpsZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2liYmxlLWJ0bi1wdXp6bGUnKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8xJykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fMicpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzMnKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl80JykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIHJldHVybiAxOwogICAgfSwKICAgIGltZzogZnVuY3Rpb24gaW1nKCkgewogICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl80JykuY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tb3BhY2l0eS1wdXp6bGUnKSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICB2YXIgd29yZEFsbEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi53b3JkLXB1enpsZSIuY29uY2F0KHRoaXMubnVtKSk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmRBbGxJbWcubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICB3b3JkQWxsSW1nW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2ltZy1ub25lLXB1enpsZScpOwogICAgICB9CgogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzQnKS5jbGFzc0xpc3QuYWRkKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgcmV0dXJuIDE7CiAgICB9LAogICAgc3RhdDogZnVuY3Rpb24gc3RhdChjb3JyZWN0LCB3b3JkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghY29ycmVjdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMy5jb3JyZWN0V29yZHMucHVzaCh3b3JkKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF90aGlzMy53cm9uZ1dvcmRzLnB1c2god29yZCk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy53b3JkUHJvY2Vzc2luZyh7CiAgICAgICAgICAgICAgICAgIHdvcmQ6IHdvcmQsCiAgICAgICAgICAgICAgICAgIHJpZ2h0OiBjb3JyZWN0LAogICAgICAgICAgICAgICAgICBvZmZEYXRlOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlc3VsdHM6IGZ1bmN0aW9uIHJlc3VsdHMoKSB7CiAgICAgIHRoaXMuc2hvd1N0YXRpc3RpY3MgPSB0cnVlOwogICAgfSwKICAgIGF1ZGlvaGludDogZnVuY3Rpb24gYXVkaW9oaW50KCkgewogICAgICAvLyBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyh0aGlzLmlzVXJsRmlsZXMgKyB0aGlzLndvcmRzW3RoaXMubnVtXS5hdWRpb0V4YW1wbGUpOwogICAgICAvLyBhd2FpdCBhdWRpby5wbGF5KCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaXNVcmxGaWxlcyk7CiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzEnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2J0bi1vcGFjaXR5LXB1enpsZScpKSB7CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0KCiAgICAgIHZhciBhdWRpbyA9IG5ldyBBdWRpbyh0aGlzLnVybEZpbGVzICsgdGhpcy53b3Jkc1t0aGlzLm51bV0uYXVkaW9FeGFtcGxlKTsKICAgICAgYXVkaW8ucGxheSgpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzEnKS5jbGFzc0xpc3QuYWRkKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgcmV0dXJuIDE7CiAgICB9LAogICAgdGV4dGhpbnQ6IGZ1bmN0aW9uIHRleHRoaW50KCkgewogICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8yJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tb3BhY2l0eS1wdXp6bGUnKSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dEV4YW1wbGVUcmFuc2xhdGUnKS5pbm5lclRleHQgPSB0aGlzLndvcmRzW3RoaXMubnVtXS50ZXh0RXhhbXBsZVRyYW5zbGF0ZTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8yJykuY2xhc3NMaXN0LmFkZCgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIHJldHVybiAxOwogICAgfSwKICAgIGF1ZGlvbWVhbmluZzogZnVuY3Rpb24gYXVkaW9tZWFuaW5nKCkgewogICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8zJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdidG4tb3BhY2l0eS1wdXp6bGUnKSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CgogICAgICB2YXIgYXVkaW8gPSBuZXcgQXVkaW8odGhpcy51cmxGaWxlcyArIHRoaXMud29yZHNbdGhpcy5udW1dLmF1ZGlvTWVhbmluZyk7CiAgICAgIGF1ZGlvLnBsYXkoKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8zJykuY2xhc3NMaXN0LmFkZCgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIHJldHVybiAxOwogICAgfSwKICAgIGRlbGV0ZWhpbnQ6IGZ1bmN0aW9uIGRlbGV0ZWhpbnQoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0RXhhbXBsZVRyYW5zbGF0ZScpLmlubmVyVGV4dCA9ICcnOwogICAgfSwKICAgIGxvY2FsOiBmdW5jdGlvbiBsb2NhbCgpIHsKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsZXZlbCcpKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZF9sZXZlbCA9ICtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGV2ZWwnKTsKICAgICAgICB0aGlzLnNlbGVjdGVkX3BhZ2UgPSArbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhZ2UnKTsKICAgICAgfQogICAgfSwKICAgIHdhdGNoX2xvYWRfZ2FtZTogZnVuY3Rpb24gd2F0Y2hfbG9hZF9nYW1lKCkgewogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud29yZC1jb250YWluZXItcHV6emxlJykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciBhID0gaXRlbTsKICAgICAgICBhLmlubmVySFRNTCA9ICcnOwogICAgICB9KTsKICAgICAgdmFyIF90aGlzJCRyZWZzMiA9IHRoaXMuJHJlZnMsCiAgICAgICAgICBjb250aW51ZVdvcmQgPSBfdGhpcyQkcmVmczIuY29udGludWVXb3JkLAogICAgICAgICAgY2hlY2sgPSBfdGhpcyQkcmVmczIuY2hlY2ssCiAgICAgICAgICBkb250S25vdyA9IF90aGlzJCRyZWZzMi5kb250S25vdywKICAgICAgICAgIHJlc3VsdHMgPSBfdGhpcyQkcmVmczIucmVzdWx0czsKICAgICAgaWYgKGNvbnRpbnVlV29yZCkgY29udGludWVXb3JkLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2liYmxlLWJ0bi1wdXp6bGUnKTsKICAgICAgaWYgKGNoZWNrKSBjaGVjay5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmJsZS1idG4tcHV6emxlJyk7CiAgICAgIGlmIChkb250S25vdykgZG9udEtub3cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJibGUtYnRuLXB1enpsZScpOwogICAgICBpZiAocmVzdWx0cykgcmVzdWx0cy5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmJsZS1idG4tcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fMScpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uXzInKS5jbGFzc0xpc3QucmVtb3ZlKCdidG4tb3BhY2l0eS1wdXp6bGUnKTsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbl8zJykuY2xhc3NMaXN0LnJlbW92ZSgnYnRuLW9wYWNpdHktcHV6emxlJyk7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25fNCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1vcGFjaXR5LXB1enpsZScpOwogICAgICB0aGlzLm51bSA9IDA7CiAgICAgIHRoaXMubW92ZVkgPSAwOwogICAgICB0aGlzLmJvb2xlYW5Gb3JDaGVjayA9IGZhbHNlOwogICAgICB0aGlzLmNvbnRpbnVlQ291bnQgPSAwOwogICAgICB0aGlzLmdhbWUoKTsKICAgICAgdGhpcy5kZWxldGVoaW50KCk7CiAgICB9CiAgfSkKfTs="},null]}