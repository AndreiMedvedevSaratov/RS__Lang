{"remainingRequest":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\thread-loader\\dist\\cjs.js!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\babel-loader\\lib\\index.js!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\eslint-loader\\index.js??ref--12-0!F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\main.js","dependencies":[{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\main.js","mtime":1595008911796},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiRjpcXFJTXFxSZXBvc2l0YXJpZXNcXFJTLUxhbmdcXHJzbGFuZ1xcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiRjpcXFJTXFxSZXBvc2l0YXJpZXNcXFJTLUxhbmdcXHJzbGFuZ1xcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJGOlxcUlNcXFJlcG9zaXRhcmllc1xcUlMtTGFuZ1xccnNsYW5nXFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgIkY6XFxSU1xcUmVwb3NpdGFyaWVzXFxSUy1MYW5nXFxyc2xhbmdcXG5vZGVfbW9kdWxlc1xcY29yZS1qc1xcbW9kdWxlc1xcZXMucHJvbWlzZS5maW5hbGx5LmpzIjsKCi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVyc2NvcmUtZGFuZ2xlICovCmltcG9ydCAnQC9hc3NldHMvc2Nzcy9tYWluLnNjc3MnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWVUb2FzdCBmcm9tICd2dWUtdG9hc3Qtbm90aWZpY2F0aW9uJzsKaW1wb3J0IEFwcCBmcm9tICcuL0FwcC52dWUnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXInOwppbXBvcnQgdnVldGlmeSBmcm9tICcuL3BsdWdpbnMvdnVldGlmeSc7IC8vIEltcG9ydCBvbmUgb2YgYXZhaWxhYmxlIHRoZW1lcwovLyBpbXBvcnQgJ3Z1ZS10b2FzdC1ub3RpZmljYXRpb24vZGlzdC90aGVtZS1kZWZhdWx0LmNzcyc7CgppbXBvcnQgJ3Z1ZS10b2FzdC1ub3RpZmljYXRpb24vZGlzdC90aGVtZS1zdWdhci5jc3MnOwpWdWUuY29uZmlnLnByb2R1Y3Rpb25UaXAgPSBmYWxzZTsKVnVlLnVzZShWdWVUb2FzdCk7IC8vIGF4aW9zLmRlZmF1bHRzLndpdGhDcmVkZW50aWFscyA9IHRydWU7Cgp2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKaWYgKHRva2VuKSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbiA9IHsKICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRva2VuKQp9OyAvLyDQn9GA0L7QstC10YDQutCwINC90LAg0YPRgdGC0LDRgNC10YjQvdC40Lkg0YLQvtC60LXQvSDQuCDQt9Cw0LzQtdC90LAg0LXQs9C+INC90LAg0L3QvtCy0YvQuSDQsdC10Lcg0L/QvtCy0YLQvtGA0L3QvtC5INCw0LLRgtC+0YDQuNC30LDRhtC40LgKCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICB2YXIgb3JpZ2luYWxSZXF1ZXN0ID0gZXJyb3IuY29uZmlnOwoKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgJiYgb3JpZ2luYWxSZXF1ZXN0LnVybCA9PT0gIiIuY29uY2F0KHN0b3JlLmdldHRlcnMuZ2V0U2VydmVyVXJsLCAiL3VzZXJzLyIpLmNvbmNhdChzdG9yZS5nZXR0ZXJzWyd1c2VyL2dldFByb2ZpbGUnXS51c2VySWQsICIvdG9rZW5zIikpIHsKICAgIHN0b3JlLmRpc3BhdGNoKCdBVVRIX0xPR09VVCcpOwogICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgc3RvcmUuZGlzcGF0Y2goJ0FMRVJUJywgewogICAgICBzdGF0dXM6ICdlcnJvcicsCiAgICAgIG1lc3NhZ2U6ICfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINGBINC/0L7Qu9GD0YfQtdC90LjQtdC8INC90L7QstC+0LPQviDRgtC+0LrQtdC90LAsINC/0YDQvtGB0YzQsdCwINCw0LLRgtC+0YDQuNC30L7QstCw0YLRgdGPINCyINGA0YPRh9C90YPRjiEnCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQoKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgJiYgIW9yaWdpbmFsUmVxdWVzdC5fcmV0cnkpIHsKICAgIG9yaWdpbmFsUmVxdWVzdC5fcmV0cnkgPSB0cnVlOwogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdBVVRIX1JFRlJFU0hfVE9LRU4nKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMSkgYXhpb3Mob3JpZ2luYWxSZXF1ZXN0KTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7Cm5ldyBWdWUoewogIHJvdXRlcjogcm91dGVyLAogIHN0b3JlOiBzdG9yZSwKICB2dWV0aWZ5OiB2dWV0aWZ5LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgpIHsKICAgIHJldHVybiBoKEFwcCk7CiAgfQp9KS4kbW91bnQoJyNhcHAnKTsgLy8gc3RvcmUuc3Vic2NyaWJlQWN0aW9uKChhY3Rpb24pID0+IHsKLy8gCWNvbnNvbGUuaW5mbygn0KHRgNCw0LHQvtGC0LDQuyBBY3Rpb24nLCBhY3Rpb24pOwovLyB9KTsKLy8gc3RvcmUuc3Vic2NyaWJlKChtdXRhdGlvbikgPT4gewovLyAJY29uc29sZS5pbmZvKCfQodGA0LDQsdC+0YLQsNC7IE11dGF0aW9uICcsIG11dGF0aW9uKTsKLy8gfSk7"},{"version":3,"sources":["F:/RS/Repositaries/RS-Lang/rslang/src/main.js"],"names":["Vue","axios","VueToast","App","store","router","vuetify","config","productionTip","use","token","localStorage","getItem","defaults","headers","common","Authorization","interceptors","response","error","originalRequest","status","url","getters","getServerUrl","userId","dispatch","push","message","Promise","reject","_retry","then","res","render","h","$mount"],"mappings":";;;;;;;AAAA;AACA,OAAO,yBAAP;AACA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,OAAP,MAAoB,mBAApB,C,CAEA;AACA;;AACA,OAAO,6CAAP;AAEAN,GAAG,CAACO,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AAEAR,GAAG,CAACS,GAAJ,CAAQP,QAAR,E,CAEA;;AACA,IAAMQ,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,IAAIF,KAAJ,EAAWT,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,GAAgC;AAAEC,EAAAA,aAAa,mBAAYN,KAAZ;AAAf,CAAhC,C,CAEX;;AACAT,KAAK,CAACgB,YAAN,CAAmBC,QAAnB,CAA4BT,GAA5B,CAAgC,UAACS,QAAD;AAAA,SAAcA,QAAd;AAAA,CAAhC,EAAwD,UAACC,KAAD,EAAW;AAClE,MAAMC,eAAe,GAAGD,KAAK,CAACZ,MAA9B;;AACA,MAAIY,KAAK,CAACD,QAAN,CAAeG,MAAf,KAA0B,GAA1B,IAAiCD,eAAe,CAACE,GAAhB,eAA2BlB,KAAK,CAACmB,OAAN,CAAcC,YAAzC,oBAA+DpB,KAAK,CAACmB,OAAN,CAAc,iBAAd,EAAiCE,MAAhG,YAArC,EAAsJ;AACrJrB,IAAAA,KAAK,CAACsB,QAAN,CAAe,aAAf;AACArB,IAAAA,MAAM,CAACsB,IAAP,CAAY,QAAZ;AACAvB,IAAAA,KAAK,CAACsB,QAAN,CAAe,OAAf,EAAwB;AAAEL,MAAAA,MAAM,EAAE,OAAV;AAAmBO,MAAAA,OAAO,EAAE;AAA5B,KAAxB;AACA,WAAOC,OAAO,CAACC,MAAR,CAAeX,KAAf,CAAP;AACA;;AACD,MAAIA,KAAK,CAACD,QAAN,CAAeG,MAAf,KAA0B,GAA1B,IAAiC,CAACD,eAAe,CAACW,MAAtD,EAA8D;AAC7DX,IAAAA,eAAe,CAACW,MAAhB,GAAyB,IAAzB;AACA,WAAO3B,KAAK,CAACsB,QAAN,CAAe,oBAAf,EACLM,IADK,CACA,UAACC,GAAD,EAAS;AACd,UAAIA,GAAG,CAACZ,MAAJ,KAAe,GAAnB,EAAwBpB,KAAK,CAACmB,eAAD,CAAL;AACxB,KAHK,CAAP;AAIA;;AACD,SAAOS,OAAO,CAACC,MAAR,CAAeX,KAAf,CAAP;AACA,CAhBD;AAkBA,IAAInB,GAAJ,CAAQ;AACPK,EAAAA,MAAM,EAANA,MADO;AAEPD,EAAAA,KAAK,EAALA,KAFO;AAGPE,EAAAA,OAAO,EAAPA,OAHO;AAIP4B,EAAAA,MAAM,EAAE,gBAACC,CAAD;AAAA,WAAOA,CAAC,CAAChC,GAAD,CAAR;AAAA;AAJD,CAAR,EAKGiC,MALH,CAKU,MALV,E,CAOA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/* eslint-disable no-underscore-dangle */\r\nimport '@/assets/scss/main.scss';\r\nimport Vue from 'vue';\r\nimport axios from 'axios';\r\nimport VueToast from 'vue-toast-notification';\r\nimport App from './App.vue';\r\nimport store from './store';\r\nimport router from './router';\r\nimport vuetify from './plugins/vuetify';\r\n\r\n// Import one of available themes\r\n// import 'vue-toast-notification/dist/theme-default.css';\r\nimport 'vue-toast-notification/dist/theme-sugar.css';\r\n\r\nVue.config.productionTip = false;\r\n\r\nVue.use(VueToast);\r\n\r\n// axios.defaults.withCredentials = true;\r\nconst token = localStorage.getItem('token');\r\nif (token) axios.defaults.headers.common = { Authorization: `Bearer ${token}` };\r\n\r\n// Проверка на устарешний токен и замена его на новый без повторной авторизации\r\naxios.interceptors.response.use((response) => response, (error) => {\r\n\tconst originalRequest = error.config;\r\n\tif (error.response.status === 401 && originalRequest.url === `${store.getters.getServerUrl}/users/${store.getters['user/getProfile'].userId}/tokens`) {\r\n\t\tstore.dispatch('AUTH_LOGOUT');\r\n\t\trouter.push('/login');\r\n\t\tstore.dispatch('ALERT', { status: 'error', message: 'Произошла ошибка с получением нового токена, просьба авторизоватся в ручную!' });\r\n\t\treturn Promise.reject(error);\r\n\t}\r\n\tif (error.response.status === 401 && !originalRequest._retry) {\r\n\t\toriginalRequest._retry = true;\r\n\t\treturn store.dispatch('AUTH_REFRESH_TOKEN')\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res.status === 201) axios(originalRequest);\r\n\t\t\t});\r\n\t}\r\n\treturn Promise.reject(error);\r\n});\r\n\r\nnew Vue({\r\n\trouter,\r\n\tstore,\r\n\tvuetify,\r\n\trender: (h) => h(App),\r\n}).$mount('#app');\r\n\r\n// store.subscribeAction((action) => {\r\n// \tconsole.info('Сработал Action', action);\r\n// });\r\n// store.subscribe((mutation) => {\r\n// \tconsole.info('Сработал Mutation ', mutation);\r\n// });\r\n"]}]}