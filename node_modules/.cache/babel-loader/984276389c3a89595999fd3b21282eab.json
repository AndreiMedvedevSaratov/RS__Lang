{"remainingRequest":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\thread-loader\\dist\\cjs.js!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\babel-loader\\lib\\index.js!F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vuetify\\lib\\components\\VDataTable\\VDataTable.js","dependencies":[{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vuetify\\lib\\components\\VDataTable\\VDataTable.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiRjovUlMvUmVwb3NpdGFyaWVzL1JTLUxhbmcvcnNsYW5nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiRjovUlMvUmVwb3NpdGFyaWVzL1JTLUxhbmcvcnNsYW5nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJGOi9SUy9SZXBvc2l0YXJpZXMvUlMtTGFuZy9yc2xhbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1ZEYXRhVGFibGUvVkRhdGFUYWJsZS5zYXNzIjsgLy8gQ29tcG9uZW50cwoKaW1wb3J0IHsgVkRhdGEgfSBmcm9tICcuLi9WRGF0YSc7CmltcG9ydCB7IFZEYXRhRm9vdGVyLCBWRGF0YUl0ZXJhdG9yIH0gZnJvbSAnLi4vVkRhdGFJdGVyYXRvcic7CmltcG9ydCBWQnRuIGZyb20gJy4uL1ZCdG4nOwppbXBvcnQgVkRhdGFUYWJsZUhlYWRlciBmcm9tICcuL1ZEYXRhVGFibGVIZWFkZXInOyAvLyBpbXBvcnQgVlZpcnR1YWxUYWJsZSBmcm9tICcuL1ZWaXJ0dWFsVGFibGUnCgppbXBvcnQgVkljb24gZnJvbSAnLi4vVkljb24nOwppbXBvcnQgUm93IGZyb20gJy4vUm93JzsKaW1wb3J0IFJvd0dyb3VwIGZyb20gJy4vUm93R3JvdXAnOwppbXBvcnQgVlNpbXBsZUNoZWNrYm94IGZyb20gJy4uL1ZDaGVja2JveC9WU2ltcGxlQ2hlY2tib3gnOwppbXBvcnQgVlNpbXBsZVRhYmxlIGZyb20gJy4vVlNpbXBsZVRhYmxlJzsKaW1wb3J0IE1vYmlsZVJvdyBmcm9tICcuL01vYmlsZVJvdyc7IC8vIE1peGlucwoKaW1wb3J0IExvYWRhYmxlIGZyb20gJy4uLy4uL21peGlucy9sb2FkYWJsZSc7IC8vIERpcmVjdGl2ZXMKCmltcG9ydCByaXBwbGUgZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9yaXBwbGUnOyAvLyBIZWxwZXJzCgppbXBvcnQgbWl4aW5zIGZyb20gJy4uLy4uL3V0aWwvbWl4aW5zJzsKaW1wb3J0IHsgZGVlcEVxdWFsLCBnZXRPYmplY3RWYWx1ZUJ5UGF0aCwgZ2V0UHJlZml4ZWRTY29wZWRTbG90cywgZ2V0U2xvdCwgZGVmYXVsdEZpbHRlciwgY2FtZWxpemVPYmplY3RLZXlzLCBnZXRQcm9wZXJ0eUZyb21JdGVtIH0gZnJvbSAnLi4vLi4vdXRpbC9oZWxwZXJzJzsKaW1wb3J0IHsgYnJlYWtpbmcgfSBmcm9tICcuLi8uLi91dGlsL2NvbnNvbGUnOwppbXBvcnQgeyBtZXJnZUNsYXNzZXMgfSBmcm9tICcuLi8uLi91dGlsL21lcmdlRGF0YSc7CgpmdW5jdGlvbiBmaWx0ZXJGbihpdGVtLCBzZWFyY2gsIGZpbHRlcikgewogIHJldHVybiBmdW5jdGlvbiAoaGVhZGVyKSB7CiAgICB2YXIgdmFsdWUgPSBnZXRPYmplY3RWYWx1ZUJ5UGF0aChpdGVtLCBoZWFkZXIudmFsdWUpOwogICAgcmV0dXJuIGhlYWRlci5maWx0ZXIgPyBoZWFkZXIuZmlsdGVyKHZhbHVlLCBzZWFyY2gsIGl0ZW0pIDogZmlsdGVyKHZhbHVlLCBzZWFyY2gsIGl0ZW0pOwogIH07Cn0KCmZ1bmN0aW9uIHNlYXJjaFRhYmxlSXRlbXMoaXRlbXMsIHNlYXJjaCwgaGVhZGVyc1dpdGhDdXN0b21GaWx0ZXJzLCBoZWFkZXJzV2l0aG91dEN1c3RvbUZpbHRlcnMsIGN1c3RvbUZpbHRlcikgewogIHNlYXJjaCA9IHR5cGVvZiBzZWFyY2ggPT09ICdzdHJpbmcnID8gc2VhcmNoLnRyaW0oKSA6IG51bGw7CiAgcmV0dXJuIGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgLy8gSGVhZGVycyB3aXRoIGN1c3RvbSBmaWx0ZXJzIGFyZSBldmFsdWF0ZWQgd2hldGhlciBvciBub3QgYSBzZWFyY2ggdGVybSBoYXMgYmVlbiBwcm92aWRlZC4KICAgIC8vIFdlIG5lZWQgdG8gbWF0Y2ggZXZlcnkgZmlsdGVyIHRvIGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRzLgogICAgdmFyIG1hdGNoZXNDb2x1bW5GaWx0ZXJzID0gaGVhZGVyc1dpdGhDdXN0b21GaWx0ZXJzLmV2ZXJ5KGZpbHRlckZuKGl0ZW0sIHNlYXJjaCwgZGVmYXVsdEZpbHRlcikpOyAvLyBIZWFkZXJzIHdpdGhvdXQgY3VzdG9tIGZpbHRlcnMgYXJlIG9ubHkgZmlsdGVyZWQgYnkgdGhlIGBzZWFyY2hgIHByb3BlcnR5IGlmIGl0IGlzIGRlZmluZWQuCiAgICAvLyBXZSBvbmx5IG5lZWQgYSBzaW5nbGUgY29sdW1uIHRvIG1hdGNoIHRoZSBzZWFyY2ggdGVybSB0byBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0cy4KCiAgICB2YXIgbWF0Y2hlc1NlYXJjaFRlcm0gPSAhc2VhcmNoIHx8IGhlYWRlcnNXaXRob3V0Q3VzdG9tRmlsdGVycy5zb21lKGZpbHRlckZuKGl0ZW0sIHNlYXJjaCwgY3VzdG9tRmlsdGVyKSk7CiAgICByZXR1cm4gbWF0Y2hlc0NvbHVtbkZpbHRlcnMgJiYgbWF0Y2hlc1NlYXJjaFRlcm07CiAgfSk7Cn0KLyogQHZ1ZS9jb21wb25lbnQgKi8KCgpleHBvcnQgZGVmYXVsdCBtaXhpbnMoVkRhdGFJdGVyYXRvciwgTG9hZGFibGUpLmV4dGVuZCh7CiAgbmFtZTogJ3YtZGF0YS10YWJsZScsCiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS9pc3N1ZXMvNjg3MgogIGRpcmVjdGl2ZXM6IHsKICAgIHJpcHBsZTogcmlwcGxlCiAgfSwKICBwcm9wczogewogICAgaGVhZGVyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgc2hvd1NlbGVjdDogQm9vbGVhbiwKICAgIHNob3dFeHBhbmQ6IEJvb2xlYW4sCiAgICBzaG93R3JvdXBCeTogQm9vbGVhbiwKICAgIC8vIFRPRE86IEZpeAogICAgLy8gdmlydHVhbFJvd3M6IEJvb2xlYW4sCiAgICBoZWlnaHQ6IFtOdW1iZXIsIFN0cmluZ10sCiAgICBoaWRlRGVmYXVsdEhlYWRlcjogQm9vbGVhbiwKICAgIGNhcHRpb246IFN0cmluZywKICAgIGRlbnNlOiBCb29sZWFuLAogICAgaGVhZGVyUHJvcHM6IE9iamVjdCwKICAgIGNhbGN1bGF0ZVdpZHRoczogQm9vbGVhbiwKICAgIGZpeGVkSGVhZGVyOiBCb29sZWFuLAogICAgaGVhZGVyc0xlbmd0aDogTnVtYmVyLAogICAgZXhwYW5kSWNvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICckZXhwYW5kJwogICAgfSwKICAgIGN1c3RvbUZpbHRlcjogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogZGVmYXVsdEZpbHRlcgogICAgfSwKICAgIGl0ZW1DbGFzczogewogICAgICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfSwKICAgIGxvYWRlckhlaWdodDogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICBkZWZhdWx0OiA0CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW50ZXJuYWxHcm91cEJ5OiBbXSwKICAgICAgb3BlbkNhY2hlOiB7fSwKICAgICAgd2lkdGhzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wdXRlZEhlYWRlcnM6IGZ1bmN0aW9uIGNvbXB1dGVkSGVhZGVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5oZWFkZXJzKSByZXR1cm4gW107CiAgICAgIHZhciBoZWFkZXJzID0gdGhpcy5oZWFkZXJzLmZpbHRlcihmdW5jdGlvbiAoaCkgewogICAgICAgIHJldHVybiBoLnZhbHVlID09PSB1bmRlZmluZWQgfHwgIV90aGlzLmludGVybmFsR3JvdXBCeS5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gdiA9PT0gaC52YWx1ZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHZhciBkZWZhdWx0SGVhZGVyID0gewogICAgICAgIHRleHQ6ICcnLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB3aWR0aDogJzFweCcKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLnNob3dTZWxlY3QpIHsKICAgICAgICB2YXIgaW5kZXggPSBoZWFkZXJzLmZpbmRJbmRleChmdW5jdGlvbiAoaCkgewogICAgICAgICAgcmV0dXJuIGgudmFsdWUgPT09ICdkYXRhLXRhYmxlLXNlbGVjdCc7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGluZGV4IDwgMCkgaGVhZGVycy51bnNoaWZ0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdEhlYWRlciksIHt9LCB7CiAgICAgICAgICB2YWx1ZTogJ2RhdGEtdGFibGUtc2VsZWN0JwogICAgICAgIH0pKTtlbHNlIGhlYWRlcnMuc3BsaWNlKGluZGV4LCAxLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRIZWFkZXIpLCBoZWFkZXJzW2luZGV4XSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5zaG93RXhwYW5kKSB7CiAgICAgICAgdmFyIF9pbmRleCA9IGhlYWRlcnMuZmluZEluZGV4KGZ1bmN0aW9uIChoKSB7CiAgICAgICAgICByZXR1cm4gaC52YWx1ZSA9PT0gJ2RhdGEtdGFibGUtZXhwYW5kJzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKF9pbmRleCA8IDApIGhlYWRlcnMudW5zaGlmdChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRIZWFkZXIpLCB7fSwgewogICAgICAgICAgdmFsdWU6ICdkYXRhLXRhYmxlLWV4cGFuZCcKICAgICAgICB9KSk7ZWxzZSBoZWFkZXJzLnNwbGljZShfaW5kZXgsIDEsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdEhlYWRlciksIGhlYWRlcnNbX2luZGV4XSkpOwogICAgICB9CgogICAgICByZXR1cm4gaGVhZGVyczsKICAgIH0sCiAgICBjb2xzcGFuQXR0cnM6IGZ1bmN0aW9uIGNvbHNwYW5BdHRycygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB1bmRlZmluZWQgOiB7CiAgICAgICAgY29sc3BhbjogdGhpcy5oZWFkZXJzTGVuZ3RoIHx8IHRoaXMuY29tcHV0ZWRIZWFkZXJzLmxlbmd0aAogICAgICB9OwogICAgfSwKICAgIGNvbHVtblNvcnRlcnM6IGZ1bmN0aW9uIGNvbHVtblNvcnRlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVkSGVhZGVycy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaGVhZGVyKSB7CiAgICAgICAgaWYgKGhlYWRlci5zb3J0KSBhY2NbaGVhZGVyLnZhbHVlXSA9IGhlYWRlci5zb3J0OwogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIHt9KTsKICAgIH0sCiAgICBoZWFkZXJzV2l0aEN1c3RvbUZpbHRlcnM6IGZ1bmN0aW9uIGhlYWRlcnNXaXRoQ3VzdG9tRmlsdGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgIHJldHVybiBoZWFkZXIuZmlsdGVyICYmICghaGVhZGVyLmhhc093blByb3BlcnR5KCdmaWx0ZXJhYmxlJykgfHwgaGVhZGVyLmZpbHRlcmFibGUgPT09IHRydWUpOwogICAgICB9KTsKICAgIH0sCiAgICBoZWFkZXJzV2l0aG91dEN1c3RvbUZpbHRlcnM6IGZ1bmN0aW9uIGhlYWRlcnNXaXRob3V0Q3VzdG9tRmlsdGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgIHJldHVybiAhaGVhZGVyLmZpbHRlciAmJiAoIWhlYWRlci5oYXNPd25Qcm9wZXJ0eSgnZmlsdGVyYWJsZScpIHx8IGhlYWRlci5maWx0ZXJhYmxlID09PSB0cnVlKTsKICAgICAgfSk7CiAgICB9LAogICAgc2FuaXRpemVkSGVhZGVyUHJvcHM6IGZ1bmN0aW9uIHNhbml0aXplZEhlYWRlclByb3BzKCkgewogICAgICByZXR1cm4gY2FtZWxpemVPYmplY3RLZXlzKHRoaXMuaGVhZGVyUHJvcHMpOwogICAgfSwKICAgIGNvbXB1dGVkSXRlbXNQZXJQYWdlOiBmdW5jdGlvbiBjb21wdXRlZEl0ZW1zUGVyUGFnZSgpIHsKICAgICAgdmFyIGl0ZW1zUGVyUGFnZSA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaXRlbXNQZXJQYWdlID8gdGhpcy5vcHRpb25zLml0ZW1zUGVyUGFnZSA6IHRoaXMuaXRlbXNQZXJQYWdlOwogICAgICB2YXIgaXRlbXNQZXJQYWdlT3B0aW9ucyA9IHRoaXMuc2FuaXRpemVkRm9vdGVyUHJvcHMuaXRlbXNQZXJQYWdlT3B0aW9uczsKCiAgICAgIGlmIChpdGVtc1BlclBhZ2VPcHRpb25zICYmICFpdGVtc1BlclBhZ2VPcHRpb25zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdudW1iZXInID8gaXRlbSA9PT0gaXRlbXNQZXJQYWdlIDogaXRlbS52YWx1ZSA9PT0gaXRlbXNQZXJQYWdlOwogICAgICB9KSkgewogICAgICAgIHZhciBmaXJzdE9wdGlvbiA9IGl0ZW1zUGVyUGFnZU9wdGlvbnNbMF07CiAgICAgICAgcmV0dXJuIF90eXBlb2YoZmlyc3RPcHRpb24pID09PSAnb2JqZWN0JyA/IGZpcnN0T3B0aW9uLnZhbHVlIDogZmlyc3RPcHRpb247CiAgICAgIH0KCiAgICAgIHJldHVybiBpdGVtc1BlclBhZ2U7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdmFyIGJyZWFraW5nUHJvcHMgPSBbWydzb3J0LWljb24nLCAnaGVhZGVyLXByb3BzLnNvcnQtaWNvbiddLCBbJ2hpZGUtaGVhZGVycycsICdoaWRlLWRlZmF1bHQtaGVhZGVyJ10sIFsnc2VsZWN0LWFsbCcsICdzaG93LXNlbGVjdCddXTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgYnJlYWtpbmdQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgb3JpZ2luYWwgPSBfcmVmMlswXSwKICAgICAgICAgIHJlcGxhY2VtZW50ID0gX3JlZjJbMV07CgogICAgICBpZiAoX3RoaXMyLiRhdHRycy5oYXNPd25Qcm9wZXJ0eShvcmlnaW5hbCkpIGJyZWFraW5nKG9yaWdpbmFsLCByZXBsYWNlbWVudCwgX3RoaXMyKTsKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIGlmICgoIXRoaXMuc29ydEJ5IHx8ICF0aGlzLnNvcnRCeS5sZW5ndGgpICYmICghdGhpcy5vcHRpb25zLnNvcnRCeSB8fCAhdGhpcy5vcHRpb25zLnNvcnRCeS5sZW5ndGgpKSB7CiAgICAvLyAgIGNvbnN0IGZpcnN0U29ydGFibGUgPSB0aGlzLmhlYWRlcnMuZmluZChoID0+ICEoJ3NvcnRhYmxlJyBpbiBoKSB8fCAhIWguc29ydGFibGUpCiAgICAvLyAgIGlmIChmaXJzdFNvcnRhYmxlKSB0aGlzLnVwZGF0ZU9wdGlvbnMoeyBzb3J0Qnk6IFtmaXJzdFNvcnRhYmxlLnZhbHVlXSwgc29ydERlc2M6IFtmYWxzZV0gfSkKICAgIC8vIH0KICAgIGlmICh0aGlzLmNhbGN1bGF0ZVdpZHRocykgewogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5jYWxjV2lkdGhzKTsKICAgICAgdGhpcy5jYWxjV2lkdGhzKCk7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMuY2FsY3VsYXRlV2lkdGhzKSB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmNhbGNXaWR0aHMpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2FsY1dpZHRoczogZnVuY3Rpb24gY2FsY1dpZHRocygpIHsKICAgICAgdGhpcy53aWR0aHMgPSBBcnJheS5mcm9tKHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykpLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmNsaWVudFdpZHRoOwogICAgICB9KTsKICAgIH0sCiAgICBjdXN0b21GaWx0ZXJXaXRoQ29sdW1uczogZnVuY3Rpb24gY3VzdG9tRmlsdGVyV2l0aENvbHVtbnMoaXRlbXMsIHNlYXJjaCkgewogICAgICByZXR1cm4gc2VhcmNoVGFibGVJdGVtcyhpdGVtcywgc2VhcmNoLCB0aGlzLmhlYWRlcnNXaXRoQ3VzdG9tRmlsdGVycywgdGhpcy5oZWFkZXJzV2l0aG91dEN1c3RvbUZpbHRlcnMsIHRoaXMuY3VzdG9tRmlsdGVyKTsKICAgIH0sCiAgICBjdXN0b21Tb3J0V2l0aEhlYWRlcnM6IGZ1bmN0aW9uIGN1c3RvbVNvcnRXaXRoSGVhZGVycyhpdGVtcywgc29ydEJ5LCBzb3J0RGVzYywgbG9jYWxlKSB7CiAgICAgIHJldHVybiB0aGlzLmN1c3RvbVNvcnQoaXRlbXMsIHNvcnRCeSwgc29ydERlc2MsIGxvY2FsZSwgdGhpcy5jb2x1bW5Tb3J0ZXJzKTsKICAgIH0sCiAgICBjcmVhdGVJdGVtUHJvcHM6IGZ1bmN0aW9uIGNyZWF0ZUl0ZW1Qcm9wcyhpdGVtKSB7CiAgICAgIHZhciBwcm9wcyA9IFZEYXRhSXRlcmF0b3Iub3B0aW9ucy5tZXRob2RzLmNyZWF0ZUl0ZW1Qcm9wcy5jYWxsKHRoaXMsIGl0ZW0pOwogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wcywgewogICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzCiAgICAgIH0pOwogICAgfSwKICAgIGdlbkNhcHRpb246IGZ1bmN0aW9uIGdlbkNhcHRpb24ocHJvcHMpIHsKICAgICAgaWYgKHRoaXMuY2FwdGlvbikgcmV0dXJuIFt0aGlzLiRjcmVhdGVFbGVtZW50KCdjYXB0aW9uJywgW3RoaXMuY2FwdGlvbl0pXTsKICAgICAgcmV0dXJuIGdldFNsb3QodGhpcywgJ2NhcHRpb24nLCBwcm9wcywgdHJ1ZSk7CiAgICB9LAogICAgZ2VuQ29sZ3JvdXA6IGZ1bmN0aW9uIGdlbkNvbGdyb3VwKHByb3BzKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ2NvbGdyb3VwJywgdGhpcy5jb21wdXRlZEhlYWRlcnMubWFwKGZ1bmN0aW9uIChoZWFkZXIpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLiRjcmVhdGVFbGVtZW50KCdjb2wnLCB7CiAgICAgICAgICBjbGFzczogewogICAgICAgICAgICBkaXZpZGVyOiBoZWFkZXIuZGl2aWRlcgogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KSk7CiAgICB9LAogICAgZ2VuTG9hZGluZzogZnVuY3Rpb24gZ2VuTG9hZGluZygpIHsKICAgICAgdmFyIHRoID0gdGhpcy4kY3JlYXRlRWxlbWVudCgndGgnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdjb2x1bW4nLAogICAgICAgIGF0dHJzOiB0aGlzLmNvbHNwYW5BdHRycwogICAgICB9LCBbdGhpcy5nZW5Qcm9ncmVzcygpXSk7CiAgICAgIHZhciB0ciA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RyJywgewogICAgICAgIHN0YXRpY0NsYXNzOiAndi1kYXRhLXRhYmxlX19wcm9ncmVzcycKICAgICAgfSwgW3RoXSk7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCd0aGVhZCcsIFt0cl0pOwogICAgfSwKICAgIGdlbkhlYWRlcnM6IGZ1bmN0aW9uIGdlbkhlYWRlcnMocHJvcHMpIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5zYW5pdGl6ZWRIZWFkZXJQcm9wcyksIHt9LCB7CiAgICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMsCiAgICAgICAgICBtb2JpbGU6IHRoaXMuaXNNb2JpbGUsCiAgICAgICAgICBzaG93R3JvdXBCeTogdGhpcy5zaG93R3JvdXBCeSwKICAgICAgICAgIHNvbWVJdGVtczogdGhpcy5zb21lSXRlbXMsCiAgICAgICAgICBldmVyeUl0ZW06IHRoaXMuZXZlcnlJdGVtLAogICAgICAgICAgc2luZ2xlU2VsZWN0OiB0aGlzLnNpbmdsZVNlbGVjdCwKICAgICAgICAgIGRpc2FibGVTb3J0OiB0aGlzLmRpc2FibGVTb3J0CiAgICAgICAgfSksCiAgICAgICAgb246IHsKICAgICAgICAgIHNvcnQ6IHByb3BzLnNvcnQsCiAgICAgICAgICBncm91cDogcHJvcHMuZ3JvdXAsCiAgICAgICAgICAndG9nZ2xlLXNlbGVjdC1hbGwnOiB0aGlzLnRvZ2dsZVNlbGVjdEFsbAogICAgICAgIH0KICAgICAgfTsKICAgICAgdmFyIGNoaWxkcmVuID0gW2dldFNsb3QodGhpcywgJ2hlYWRlcicsIGRhdGEpXTsKCiAgICAgIGlmICghdGhpcy5oaWRlRGVmYXVsdEhlYWRlcikgewogICAgICAgIHZhciBzY29wZWRTbG90cyA9IGdldFByZWZpeGVkU2NvcGVkU2xvdHMoJ2hlYWRlci4nLCB0aGlzLiRzY29wZWRTbG90cyk7CiAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLiRjcmVhdGVFbGVtZW50KFZEYXRhVGFibGVIZWFkZXIsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgICBzY29wZWRTbG90czogc2NvcGVkU2xvdHMKICAgICAgICB9KSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5sb2FkaW5nKSBjaGlsZHJlbi5wdXNoKHRoaXMuZ2VuTG9hZGluZygpKTsKICAgICAgcmV0dXJuIGNoaWxkcmVuOwogICAgfSwKICAgIGdlbkVtcHR5V3JhcHBlcjogZnVuY3Rpb24gZ2VuRW1wdHlXcmFwcGVyKGNvbnRlbnQpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RyJywgewogICAgICAgIHN0YXRpY0NsYXNzOiAndi1kYXRhLXRhYmxlX19lbXB0eS13cmFwcGVyJwogICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudCgndGQnLCB7CiAgICAgICAgYXR0cnM6IHRoaXMuY29sc3BhbkF0dHJzCiAgICAgIH0sIGNvbnRlbnQpXSk7CiAgICB9LAogICAgZ2VuSXRlbXM6IGZ1bmN0aW9uIGdlbkl0ZW1zKGl0ZW1zLCBwcm9wcykgewogICAgICB2YXIgZW1wdHkgPSB0aGlzLmdlbkVtcHR5KHByb3BzLm9yaWdpbmFsSXRlbXNMZW5ndGgsIHByb3BzLnBhZ2luYXRpb24uaXRlbXNMZW5ndGgpOwogICAgICBpZiAoZW1wdHkpIHJldHVybiBbZW1wdHldOwogICAgICByZXR1cm4gcHJvcHMuZ3JvdXBlZEl0ZW1zID8gdGhpcy5nZW5Hcm91cGVkUm93cyhwcm9wcy5ncm91cGVkSXRlbXMsIHByb3BzKSA6IHRoaXMuZ2VuUm93cyhpdGVtcywgcHJvcHMpOwogICAgfSwKICAgIGdlbkdyb3VwZWRSb3dzOiBmdW5jdGlvbiBnZW5Hcm91cGVkUm93cyhncm91cGVkSXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIGdyb3VwZWRJdGVtcy5tYXAoZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgaWYgKCFfdGhpczQub3BlbkNhY2hlLmhhc093blByb3BlcnR5KGdyb3VwLm5hbWUpKSBfdGhpczQuJHNldChfdGhpczQub3BlbkNhY2hlLCBncm91cC5uYW1lLCB0cnVlKTsKCiAgICAgICAgaWYgKF90aGlzNC4kc2NvcGVkU2xvdHMuZ3JvdXApIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuJHNjb3BlZFNsb3RzLmdyb3VwKHsKICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLm5hbWUsCiAgICAgICAgICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMsCiAgICAgICAgICAgIGl0ZW1zOiBncm91cC5pdGVtcywKICAgICAgICAgICAgaGVhZGVyczogX3RoaXM0LmNvbXB1dGVkSGVhZGVycwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuZ2VuRGVmYXVsdEdyb3VwZWRSb3coZ3JvdXAubmFtZSwgZ3JvdXAuaXRlbXMsIHByb3BzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdlbkRlZmF1bHRHcm91cGVkUm93OiBmdW5jdGlvbiBnZW5EZWZhdWx0R3JvdXBlZFJvdyhncm91cCwgaXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIGlzT3BlbiA9ICEhdGhpcy5vcGVuQ2FjaGVbZ3JvdXBdOwogICAgICB2YXIgY2hpbGRyZW4gPSBbdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5jb250ZW50JwogICAgICB9LCB0aGlzLmdlblJvd3MoaXRlbXMsIHByb3BzKSldOwoKICAgICAgdmFyIHRvZ2dsZUZuID0gZnVuY3Rpb24gdG9nZ2xlRm4oKSB7CiAgICAgICAgcmV0dXJuIF90aGlzNS4kc2V0KF90aGlzNS5vcGVuQ2FjaGUsIGdyb3VwLCAhX3RoaXM1Lm9wZW5DYWNoZVtncm91cF0pOwogICAgICB9OwoKICAgICAgdmFyIHJlbW92ZUZuID0gZnVuY3Rpb24gcmVtb3ZlRm4oKSB7CiAgICAgICAgcmV0dXJuIHByb3BzLnVwZGF0ZU9wdGlvbnMoewogICAgICAgICAgZ3JvdXBCeTogW10sCiAgICAgICAgICBncm91cERlc2M6IFtdCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBpZiAodGhpcy4kc2NvcGVkU2xvdHNbJ2dyb3VwLmhlYWRlciddKSB7CiAgICAgICAgY2hpbGRyZW4udW5zaGlmdCh0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsKICAgICAgICAgIHNsb3Q6ICdjb2x1bW4uaGVhZGVyJwogICAgICAgIH0sIFt0aGlzLiRzY29wZWRTbG90c1snZ3JvdXAuaGVhZGVyJ10oewogICAgICAgICAgZ3JvdXA6IGdyb3VwLAogICAgICAgICAgZ3JvdXBCeTogcHJvcHMub3B0aW9ucy5ncm91cEJ5LAogICAgICAgICAgaXRlbXM6IGl0ZW1zLAogICAgICAgICAgaGVhZGVyczogdGhpcy5jb21wdXRlZEhlYWRlcnMsCiAgICAgICAgICBpc09wZW46IGlzT3BlbiwKICAgICAgICAgIHRvZ2dsZTogdG9nZ2xlRm4sCiAgICAgICAgICByZW1vdmU6IHJlbW92ZUZuCiAgICAgICAgfSldKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHRvZ2dsZSA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQoVkJ0biwgewogICAgICAgICAgc3RhdGljQ2xhc3M6ICdtYS0wJywKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGljb246IHRydWUsCiAgICAgICAgICAgIHNtYWxsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2xpY2s6IHRvZ2dsZUZuCiAgICAgICAgICB9CiAgICAgICAgfSwgW3RoaXMuJGNyZWF0ZUVsZW1lbnQoVkljb24sIFtpc09wZW4gPyAnJG1pbnVzJyA6ICckcGx1cyddKV0pOwogICAgICAgIHZhciByZW1vdmUgPSB0aGlzLiRjcmVhdGVFbGVtZW50KFZCdG4sIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAnbWEtMCcsCiAgICAgICAgICBwcm9wczogewogICAgICAgICAgICBpY29uOiB0cnVlLAogICAgICAgICAgICBzbWFsbDogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNsaWNrOiByZW1vdmVGbgogICAgICAgICAgfQogICAgICAgIH0sIFt0aGlzLiRjcmVhdGVFbGVtZW50KFZJY29uLCBbJyRjbG9zZSddKV0pOwogICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZCcsIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAndGV4dC1zdGFydCcsCiAgICAgICAgICBhdHRyczogdGhpcy5jb2xzcGFuQXR0cnMKICAgICAgICB9LCBbdG9nZ2xlLCAiIi5jb25jYXQocHJvcHMub3B0aW9ucy5ncm91cEJ5WzBdLCAiOiAiKS5jb25jYXQoZ3JvdXApLCByZW1vdmVdKTsKICAgICAgICBjaGlsZHJlbi51bnNoaWZ0KHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJywgewogICAgICAgICAgc2xvdDogJ2NvbHVtbi5oZWFkZXInCiAgICAgICAgfSwgW2NvbHVtbl0pKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzWydncm91cC5zdW1tYXJ5J10pIHsKICAgICAgICBjaGlsZHJlbi5wdXNoKHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJywgewogICAgICAgICAgc2xvdDogJ2NvbHVtbi5zdW1tYXJ5JwogICAgICAgIH0sIFt0aGlzLiRzY29wZWRTbG90c1snZ3JvdXAuc3VtbWFyeSddKHsKICAgICAgICAgIGdyb3VwOiBncm91cCwKICAgICAgICAgIGdyb3VwQnk6IHByb3BzLm9wdGlvbnMuZ3JvdXBCeSwKICAgICAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzLAogICAgICAgICAgaXNPcGVuOiBpc09wZW4sCiAgICAgICAgICB0b2dnbGU6IHRvZ2dsZUZuCiAgICAgICAgfSldKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFJvd0dyb3VwLCB7CiAgICAgICAga2V5OiBncm91cCwKICAgICAgICBwcm9wczogewogICAgICAgICAgdmFsdWU6IGlzT3BlbgogICAgICAgIH0KICAgICAgfSwgY2hpbGRyZW4pOwogICAgfSwKICAgIGdlblJvd3M6IGZ1bmN0aW9uIGdlblJvd3MoaXRlbXMsIHByb3BzKSB7CiAgICAgIHJldHVybiB0aGlzLiRzY29wZWRTbG90cy5pdGVtID8gdGhpcy5nZW5TY29wZWRSb3dzKGl0ZW1zLCBwcm9wcykgOiB0aGlzLmdlbkRlZmF1bHRSb3dzKGl0ZW1zLCBwcm9wcyk7CiAgICB9LAogICAgZ2VuU2NvcGVkUm93czogZnVuY3Rpb24gZ2VuU2NvcGVkUm93cyhpdGVtcywgcHJvcHMpIHsKICAgICAgdmFyIHJvd3MgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldOwogICAgICAgIHJvd3MucHVzaCh0aGlzLiRzY29wZWRTbG90cy5pdGVtKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5jcmVhdGVJdGVtUHJvcHMoaXRlbSkpLCB7fSwgewogICAgICAgICAgaW5kZXg6IGkKICAgICAgICB9KSkpOwoKICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGVkKGl0ZW0pKSB7CiAgICAgICAgICByb3dzLnB1c2godGhpcy4kc2NvcGVkU2xvdHNbJ2V4cGFuZGVkLWl0ZW0nXSh7CiAgICAgICAgICAgIGl0ZW06IGl0ZW0sCiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzCiAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcm93czsKICAgIH0sCiAgICBnZW5EZWZhdWx0Um93czogZnVuY3Rpb24gZ2VuRGVmYXVsdFJvd3MoaXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzWydleHBhbmRlZC1pdGVtJ10gPyBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX3RoaXM2LmdlbkRlZmF1bHRFeHBhbmRlZFJvdyhpdGVtKTsKICAgICAgfSkgOiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX3RoaXM2LmdlbkRlZmF1bHRTaW1wbGVSb3coaXRlbSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdlbkRlZmF1bHRFeHBhbmRlZFJvdzogZnVuY3Rpb24gZ2VuRGVmYXVsdEV4cGFuZGVkUm93KGl0ZW0pIHsKICAgICAgdmFyIGlzRXhwYW5kZWQgPSB0aGlzLmlzRXhwYW5kZWQoaXRlbSk7CiAgICAgIHZhciBjbGFzc2VzID0gewogICAgICAgICd2LWRhdGEtdGFibGVfX2V4cGFuZGVkIHYtZGF0YS10YWJsZV9fZXhwYW5kZWRfX3Jvdyc6IGlzRXhwYW5kZWQKICAgICAgfTsKICAgICAgdmFyIGhlYWRlclJvdyA9IHRoaXMuZ2VuRGVmYXVsdFNpbXBsZVJvdyhpdGVtLCBjbGFzc2VzKTsKICAgICAgdmFyIGV4cGFuZGVkUm93ID0gdGhpcy4kY3JlYXRlRWxlbWVudCgndHInLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2V4cGFuZGVkIHYtZGF0YS10YWJsZV9fZXhwYW5kZWRfX2NvbnRlbnQnCiAgICAgIH0sIFt0aGlzLiRzY29wZWRTbG90c1snZXhwYW5kZWQtaXRlbSddKHsKICAgICAgICBpdGVtOiBpdGVtLAogICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzCiAgICAgIH0pXSk7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFJvd0dyb3VwLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiBpc0V4cGFuZGVkCiAgICAgICAgfQogICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5oZWFkZXInCiAgICAgIH0sIFtoZWFkZXJSb3ddKSwgdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5jb250ZW50JwogICAgICB9LCBbZXhwYW5kZWRSb3ddKV0pOwogICAgfSwKICAgIGdlbkRlZmF1bHRTaW1wbGVSb3c6IGZ1bmN0aW9uIGdlbkRlZmF1bHRTaW1wbGVSb3coaXRlbSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBjbGFzc2VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIHNjb3BlZFNsb3RzID0gZ2V0UHJlZml4ZWRTY29wZWRTbG90cygnaXRlbS4nLCB0aGlzLiRzY29wZWRTbG90cyk7CiAgICAgIHZhciBkYXRhID0gdGhpcy5jcmVhdGVJdGVtUHJvcHMoaXRlbSk7CgogICAgICBpZiAodGhpcy5zaG93U2VsZWN0KSB7CiAgICAgICAgdmFyIHNsb3QgPSBzY29wZWRTbG90c1snZGF0YS10YWJsZS1zZWxlY3QnXTsKICAgICAgICBzY29wZWRTbG90c1snZGF0YS10YWJsZS1zZWxlY3QnXSA9IHNsb3QgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gc2xvdChkYXRhKTsKICAgICAgICB9IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNy4kY3JlYXRlRWxlbWVudChWU2ltcGxlQ2hlY2tib3gsIHsKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2NoZWNrYm94JywKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB2YWx1ZTogZGF0YS5pc1NlbGVjdGVkLAogICAgICAgICAgICAgIGRpc2FibGVkOiAhX3RoaXM3LmlzU2VsZWN0YWJsZShpdGVtKQogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnNlbGVjdCh2YWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2hvd0V4cGFuZCkgewogICAgICAgIHZhciBfc2xvdCA9IHNjb3BlZFNsb3RzWydkYXRhLXRhYmxlLWV4cGFuZCddOwogICAgICAgIHNjb3BlZFNsb3RzWydkYXRhLXRhYmxlLWV4cGFuZCddID0gX3Nsb3QgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3Nsb3QoZGF0YSk7CiAgICAgICAgfSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczcuJGNyZWF0ZUVsZW1lbnQoVkljb24sIHsKICAgICAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2V4cGFuZC1pY29uJywKICAgICAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICAgICAndi1kYXRhLXRhYmxlX19leHBhbmQtaWNvbi0tYWN0aXZlJzogZGF0YS5pc0V4cGFuZGVkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGUpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBkYXRhLmV4cGFuZCghZGF0YS5pc0V4cGFuZGVkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIFtfdGhpczcuZXhwYW5kSWNvbl0pOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KHRoaXMuaXNNb2JpbGUgPyBNb2JpbGVSb3cgOiBSb3csIHsKICAgICAgICBrZXk6IGdldE9iamVjdFZhbHVlQnlQYXRoKGl0ZW0sIHRoaXMuaXRlbUtleSksCiAgICAgICAgY2xhc3M6IG1lcmdlQ2xhc3Nlcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNsYXNzZXMpLCB7fSwgewogICAgICAgICAgJ3YtZGF0YS10YWJsZV9fc2VsZWN0ZWQnOiBkYXRhLmlzU2VsZWN0ZWQKICAgICAgICB9KSwgZ2V0UHJvcGVydHlGcm9tSXRlbShpdGVtLCB0aGlzLml0ZW1DbGFzcykpLAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICAgIGl0ZW06IGl0ZW0sCiAgICAgICAgICBydGw6IHRoaXMuJHZ1ZXRpZnkucnRsCiAgICAgICAgfSwKICAgICAgICBzY29wZWRTbG90czogc2NvcGVkU2xvdHMsCiAgICAgICAgb246IHsKICAgICAgICAgIC8vIFRPRE86IGZvciBjbGljaywgdGhlIGZpcnN0IGFyZ3VtZW50IHNob3VsZCBiZSB0aGUgZXZlbnQsIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IHNob3VsZCBiZSBkYXRhLAogICAgICAgICAgLy8gYnV0IHRoaXMgaXMgYSBicmVha2luZyBjaGFuZ2Ugc28gaXQncyBmb3IgdjMKICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNy4kZW1pdCgnY2xpY2s6cm93JywgaXRlbSwgZGF0YSk7CiAgICAgICAgICB9LAogICAgICAgICAgY29udGV4dG1lbnU6IGZ1bmN0aW9uIGNvbnRleHRtZW51KGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczcuJGVtaXQoJ2NvbnRleHRtZW51OnJvdycsIGV2ZW50LCBkYXRhKTsKICAgICAgICAgIH0sCiAgICAgICAgICBkYmxjbGljazogZnVuY3Rpb24gZGJsY2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNy4kZW1pdCgnZGJsY2xpY2s6cm93JywgZXZlbnQsIGRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2VuQm9keTogZnVuY3Rpb24gZ2VuQm9keShwcm9wcykgewogICAgICB2YXIgZGF0YSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwgewogICAgICAgIGV4cGFuZDogdGhpcy5leHBhbmQsCiAgICAgICAgaGVhZGVyczogdGhpcy5jb21wdXRlZEhlYWRlcnMsCiAgICAgICAgaXNFeHBhbmRlZDogdGhpcy5pc0V4cGFuZGVkLAogICAgICAgIGlzTW9iaWxlOiB0aGlzLmlzTW9iaWxlLAogICAgICAgIGlzU2VsZWN0ZWQ6IHRoaXMuaXNTZWxlY3RlZCwKICAgICAgICBzZWxlY3Q6IHRoaXMuc2VsZWN0CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzLmJvZHkpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc2NvcGVkU2xvdHMuYm9keShkYXRhKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3Rib2R5JywgW2dldFNsb3QodGhpcywgJ2JvZHkucHJlcGVuZCcsIGRhdGEsIHRydWUpLCB0aGlzLmdlbkl0ZW1zKHByb3BzLml0ZW1zLCBwcm9wcyksIGdldFNsb3QodGhpcywgJ2JvZHkuYXBwZW5kJywgZGF0YSwgdHJ1ZSldKTsKICAgIH0sCiAgICBnZW5Gb290ZXJzOiBmdW5jdGlvbiBnZW5Gb290ZXJzKHByb3BzKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMsCiAgICAgICAgICBwYWdpbmF0aW9uOiBwcm9wcy5wYWdpbmF0aW9uLAogICAgICAgICAgaXRlbXNQZXJQYWdlVGV4dDogJyR2dWV0aWZ5LmRhdGFUYWJsZS5pdGVtc1BlclBhZ2VUZXh0JwogICAgICAgIH0sIHRoaXMuc2FuaXRpemVkRm9vdGVyUHJvcHMpLAogICAgICAgIG9uOiB7CiAgICAgICAgICAndXBkYXRlOm9wdGlvbnMnOiBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKHZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBwcm9wcy51cGRhdGVPcHRpb25zKHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHdpZHRoczogdGhpcy53aWR0aHMsCiAgICAgICAgaGVhZGVyczogdGhpcy5jb21wdXRlZEhlYWRlcnMKICAgICAgfTsKICAgICAgdmFyIGNoaWxkcmVuID0gW2dldFNsb3QodGhpcywgJ2Zvb3RlcicsIGRhdGEsIHRydWUpXTsKCiAgICAgIGlmICghdGhpcy5oaWRlRGVmYXVsdEZvb3RlcikgewogICAgICAgIGNoaWxkcmVuLnB1c2godGhpcy4kY3JlYXRlRWxlbWVudChWRGF0YUZvb3RlciwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKSwge30sIHsKICAgICAgICAgIHNjb3BlZFNsb3RzOiBnZXRQcmVmaXhlZFNjb3BlZFNsb3RzKCdmb290ZXIuJywgdGhpcy4kc2NvcGVkU2xvdHMpCiAgICAgICAgfSkpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNoaWxkcmVuOwogICAgfSwKICAgIGdlbkRlZmF1bHRTY29wZWRTbG90OiBmdW5jdGlvbiBnZW5EZWZhdWx0U2NvcGVkU2xvdChwcm9wcykgewogICAgICB2YXIgc2ltcGxlUHJvcHMgPSB7CiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCwKICAgICAgICBmaXhlZEhlYWRlcjogdGhpcy5maXhlZEhlYWRlciwKICAgICAgICBkZW5zZTogdGhpcy5kZW5zZQogICAgICB9OyAvLyBpZiAodGhpcy52aXJ0dWFsUm93cykgewogICAgICAvLyAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFZWaXJ0dWFsVGFibGUsIHsKICAgICAgLy8gICAgIHByb3BzOiBPYmplY3QuYXNzaWduKHNpbXBsZVByb3BzLCB7CiAgICAgIC8vICAgICAgIGl0ZW1zOiBwcm9wcy5pdGVtcywKICAgICAgLy8gICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCwKICAgICAgLy8gICAgICAgcm93SGVpZ2h0OiB0aGlzLmRlbnNlID8gMjQgOiA0OCwKICAgICAgLy8gICAgICAgaGVhZGVySGVpZ2h0OiB0aGlzLmRlbnNlID8gMzIgOiA0OCwKICAgICAgLy8gICAgICAgLy8gVE9ETzogZXhwb3NlIHJlc3Qgb2YgcHJvcHMgZnJvbSB2aXJ0dWFsIHRhYmxlPwogICAgICAvLyAgICAgfSksCiAgICAgIC8vICAgICBzY29wZWRTbG90czogewogICAgICAvLyAgICAgICBpdGVtczogKHsgaXRlbXMgfSkgPT4gdGhpcy5nZW5JdGVtcyhpdGVtcywgcHJvcHMpIGFzIGFueSwKICAgICAgLy8gICAgIH0sCiAgICAgIC8vICAgfSwgWwogICAgICAvLyAgICAgdGhpcy5wcm94eVNsb3QoJ2JvZHkuYmVmb3JlJywgW3RoaXMuZ2VuQ2FwdGlvbihwcm9wcyksIHRoaXMuZ2VuSGVhZGVycyhwcm9wcyldKSwKICAgICAgLy8gICAgIHRoaXMucHJveHlTbG90KCdib3R0b20nLCB0aGlzLmdlbkZvb3RlcnMocHJvcHMpKSwKICAgICAgLy8gICBdKQogICAgICAvLyB9CgogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChWU2ltcGxlVGFibGUsIHsKICAgICAgICBwcm9wczogc2ltcGxlUHJvcHMKICAgICAgfSwgW3RoaXMucHJveHlTbG90KCd0b3AnLCBnZXRTbG90KHRoaXMsICd0b3AnLCBwcm9wcywgdHJ1ZSkpLCB0aGlzLmdlbkNhcHRpb24ocHJvcHMpLCB0aGlzLmdlbkNvbGdyb3VwKHByb3BzKSwgdGhpcy5nZW5IZWFkZXJzKHByb3BzKSwgdGhpcy5nZW5Cb2R5KHByb3BzKSwgdGhpcy5wcm94eVNsb3QoJ2JvdHRvbScsIHRoaXMuZ2VuRm9vdGVycyhwcm9wcykpXSk7CiAgICB9LAogICAgcHJveHlTbG90OiBmdW5jdGlvbiBwcm94eVNsb3Qoc2xvdCwgY29udGVudCkgewogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogc2xvdAogICAgICB9LCBjb250ZW50KTsKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoVkRhdGEsIHsKICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy4kcHJvcHMpLCB7fSwgewogICAgICAgIGN1c3RvbUZpbHRlcjogdGhpcy5jdXN0b21GaWx0ZXJXaXRoQ29sdW1ucywKICAgICAgICBjdXN0b21Tb3J0OiB0aGlzLmN1c3RvbVNvcnRXaXRoSGVhZGVycywKICAgICAgICBpdGVtc1BlclBhZ2U6IHRoaXMuY29tcHV0ZWRJdGVtc1BlclBhZ2UKICAgICAgfSksCiAgICAgIG9uOiB7CiAgICAgICAgJ3VwZGF0ZTpvcHRpb25zJzogZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyh2LCBvbGQpIHsKICAgICAgICAgIF90aGlzOC5pbnRlcm5hbEdyb3VwQnkgPSB2Lmdyb3VwQnkgfHwgW107CiAgICAgICAgICAhZGVlcEVxdWFsKHYsIG9sZCkgJiYgX3RoaXM4LiRlbWl0KCd1cGRhdGU6b3B0aW9ucycsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3VwZGF0ZTpwYWdlJzogZnVuY3Rpb24gdXBkYXRlUGFnZSh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LiRlbWl0KCd1cGRhdGU6cGFnZScsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3VwZGF0ZTppdGVtcy1wZXItcGFnZSc6IGZ1bmN0aW9uIHVwZGF0ZUl0ZW1zUGVyUGFnZSh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LiRlbWl0KCd1cGRhdGU6aXRlbXMtcGVyLXBhZ2UnLCB2KTsKICAgICAgICB9LAogICAgICAgICd1cGRhdGU6c29ydC1ieSc6IGZ1bmN0aW9uIHVwZGF0ZVNvcnRCeSh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LiRlbWl0KCd1cGRhdGU6c29ydC1ieScsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3VwZGF0ZTpzb3J0LWRlc2MnOiBmdW5jdGlvbiB1cGRhdGVTb3J0RGVzYyh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LiRlbWl0KCd1cGRhdGU6c29ydC1kZXNjJywgdik7CiAgICAgICAgfSwKICAgICAgICAndXBkYXRlOmdyb3VwLWJ5JzogZnVuY3Rpb24gdXBkYXRlR3JvdXBCeSh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LiRlbWl0KCd1cGRhdGU6Z3JvdXAtYnknLCB2KTsKICAgICAgICB9LAogICAgICAgICd1cGRhdGU6Z3JvdXAtZGVzYyc6IGZ1bmN0aW9uIHVwZGF0ZUdyb3VwRGVzYyh2KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LiRlbWl0KCd1cGRhdGU6Z3JvdXAtZGVzYycsIHYpOwogICAgICAgIH0sCiAgICAgICAgcGFnaW5hdGlvbjogZnVuY3Rpb24gcGFnaW5hdGlvbih2LCBvbGQpIHsKICAgICAgICAgIHJldHVybiAhZGVlcEVxdWFsKHYsIG9sZCkgJiYgX3RoaXM4LiRlbWl0KCdwYWdpbmF0aW9uJywgdik7CiAgICAgICAgfSwKICAgICAgICAnY3VycmVudC1pdGVtcyc6IGZ1bmN0aW9uIGN1cnJlbnRJdGVtcyh2KSB7CiAgICAgICAgICBfdGhpczguaW50ZXJuYWxDdXJyZW50SXRlbXMgPSB2OwoKICAgICAgICAgIF90aGlzOC4kZW1pdCgnY3VycmVudC1pdGVtcycsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3BhZ2UtY291bnQnOiBmdW5jdGlvbiBwYWdlQ291bnQodikgewogICAgICAgICAgcmV0dXJuIF90aGlzOC4kZW1pdCgncGFnZS1jb3VudCcsIHYpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICBkZWZhdWx0OiB0aGlzLmdlbkRlZmF1bHRTY29wZWRTbG90CiAgICAgIH0KICAgIH0pOwogIH0KfSk7"},null]}