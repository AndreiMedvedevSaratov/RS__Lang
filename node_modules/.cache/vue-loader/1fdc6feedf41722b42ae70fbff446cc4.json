{"remainingRequest":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\components\\GameSpeaking.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\components\\GameSpeaking.vue","mtime":1594840978188},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsNCg0KLyoqDQogKiBBUEkgVnVlDQogKiBodHRwczovL3J1LnZ1ZWpzLm9yZy92Mi9hcGkvaW5kZXguaHRtbA0KICovDQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogJ1NwZWFraW5nJywNCgljb21wb25lbnRzOiB7fSwNCglwcm9wczogW10sDQoJZGF0YTogKCkgPT4gKHsNCgkJc3RlcDogMCwNCgkJc3RhdHVzOiAnJywNCgkJaXNBbnN3ZXI6IFsnWWVzLCBhY3R1YWxseSBJIGFtIGxvc3QhIEhvdyBkaWQgeW91IGtub3c/JywgJzEnLCAnMicsICczJ10sDQoJCXZpZGVvSXNFbmRlZDogZmFsc2UsDQoJCWNvdW50X2Vycm9yOiAwLA0KCQlyZWNvZ25pdGlvbjogJycsDQoJfSksDQoJY29tcHV0ZWQ6IHsNCgkJLi4ubWFwR2V0dGVycyh7DQoJCQl3b3JkczogJ2dldFdvcmRzJywNCgkJCXVybEZpbGVzOiAnZ2V0VXJsRmlsZXMnLA0KCQkJZ2V0U2hvcnRTdGF0aXN0aWNzOiAnc2hvd1Nob3J0U3RhdGlzdGljcycsDQoJCX0pLA0KCX0sDQoJd2F0Y2g6IHsNCgkJLy8gdmlkZW9Jc0VuZGVkKCkgew0KCQkvLyAJdGhpcy5zcGVhaygpOw0KCQkvLyAJdGhpcy5hbnN3ZXIoKTsNCgkJLy8gCXRoaXMudmlkZW9Jc0VuZGVkID0gZmFsc2U7DQoJCS8vIAl0aGlzLnN0ZXAgKz0gMTsNCgkJLy8gCWNvbnNvbGUubG9nKHRoaXMuc3RlcCk7DQoJCS8vIAl0aGlzLiRyZWZzLnNyYy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGAuL2Fzc2V0cy92aWRlby8ke3RoaXMuc3RlcH0ubXA0YCk7DQoJCS8vIAl0aGlzLiRyZWZzLnZpZGVvLmxvYWQoKTsNCgkJLy8gfSwNCgl9LA0KCWNyZWF0ZWQoKSB7fSwNCgltb3VudGVkKCkgew0KCQkvLyDQn9C10YDQtdC0INC90LDRh9Cw0LvQvtC8INC40LPRgNGLINC40LfQvNC10L3QuNC8INGB0YLQuNC70Ywg0YHRgtGA0LDQvdC40YbRiw0KCQl0aGlzLmFwcEh0bWwoWw0KCQkJLy8g0YHQstC10YDQvdC10Lwg0LzQtdC90Y4NCgkJCXsgb25lOiAnbWFpbicsIGtleTogJ2RyYXdlcicsIHZhbHVlOiBmYWxzZSB9LA0KCQkJLy8g0KPQsdC10YDQtdC8INGF0LvQtdCx0L3Ri9C1INC60YDQvtGI0LrQuA0KCQkJeyBvbmU6ICdtYWluJywga2V5OiAnYnJlYWRjcnVtYnMnLCB2YWx1ZTogZmFsc2UgfSwNCgkJCXsgb25lOiAnbWFpbicsIGtleTogJ2JhY2tncm91bmQnLCB2YWx1ZTogJ2luZGlnbyBsaWdodGVuLTUnIH0sDQoJCQkvLyDQmNC30LzQtdC90LjQvCDRhtCy0LXRgiBoZWFkZXIg0L/QviDRgtCw0LHQu9C40YbQtSDRhtCy0LXRgtC+0LINCgkJCS8vIGh0dHBzOi8vdnVldGlmeWpzLmNvbS9lbi9zdHlsZXMvY29sb3JzLyNzYXNzLWNvbG9yLXBhY2sNCgkJCXsgb25lOiAnYXBwJywga2V5OiAnYmFja2dyb3VuZCcsIHZhbHVlOiAnaW5kaWdvIGRhcmtlbi00JyB9LA0KCQkJLy8g0JjQt9C80LXQvdC40Lwg0YbQstC10YIg0YLQtdC60YHRgtCwINC90LAg0LHQtdC70YvQuSDQsiBoZWFkZXINCgkJCXsgb25lOiAnYXBwJywga2V5OiAnY29sb3JXaGl0ZScsIHZhbHVlOiB0cnVlIH0sDQoJCV0pOw0KCX0sDQoJYmVmb3JlRGVzdHJveSgpIHsNCgkJLy8g0J/QtdGA0LXQtCDQt9Cw0LrRgNGL0YLQuNC10Lwg0YHRgtGA0LDQvdC40YbRiyDQstC+0LfRgNCw0YnQsNC10Lwg0L3QsNGB0YLRgNC+0LnQutC4INC+0LHRgNCw0YLQvdC+DQoJCXRoaXMuYXBwSHRtbChbDQoJCQl7IG9uZTogJ21haW4nLCBrZXk6ICdkcmF3ZXInLCB2YWx1ZTogdHJ1ZSB9LA0KCQkJeyBvbmU6ICdtYWluJywga2V5OiAnYnJlYWRjcnVtYnMnLCB2YWx1ZTogdHJ1ZSB9LA0KCQkJeyBvbmU6ICdtYWluJywga2V5OiAnYmFja2dyb3VuZCcsIHZhbHVlOiAnJyB9LA0KCQkJeyBvbmU6ICdhcHAnLCBrZXk6ICdiYWNrZ3JvdW5kJywgdmFsdWU6ICdncmV5IGxpZ2h0ZW4tNScgfSwNCgkJCXsgb25lOiAnYXBwJywga2V5OiAnY29sb3JXaGl0ZScsIHZhbHVlOiBmYWxzZSB9LA0KCQldKTsNCgl9LA0KCW1ldGhvZHM6IHsNCgkJLi4ubWFwTXV0YXRpb25zKHsNCgkJCWFwcEh0bWw6ICdFRElUX0hUTUwnLA0KCQkJb2ZmU3RhdGlzdGljczogJ1NIT1dfU0hPUlRfU1RBVElTVElDUycsDQoJCX0pLA0KCQkuLi5tYXBBY3Rpb25zKHsNCgkJCWdldFdvcmRzOiAnQVBQX0dFVF9VU0VSX1dPUkRTX0FHR1JFR0FURUQnLA0KCQkJYWxlcnQ6ICdBTEVSVCcsDQoJCX0pLA0KCQlzcGVhaygpIHsNCgkJCWNvbnN0IFNwZWVjaFJlY29nbml0aW9uID0gd2luZG93LlNwZWVjaFJlY29nbml0aW9uIHx8IHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbjsNCgkJCXRoaXMucmVjb2duaXRpb24gPSBuZXcgU3BlZWNoUmVjb2duaXRpb24oKTsNCgkJCXRoaXMucmVjb2duaXRpb24ubGFuZyA9ICdlbi1VUyc7DQoJCQl0aGlzLnJlY29nbml0aW9uLmNvbnRpbnVvcyA9IGZhbHNlOw0KCQkJdGhpcy5yZWNvZ25pdGlvbi5pbnRlcmltUmVzdWx0cyA9IGZhbHNlOw0KCQkJdGhpcy5yZWNvZ25pdGlvbi5tYXhBbHRlcm5hdGl2ZXMgPSAxOw0KCQkJdGhpcy5yZWNvZ25pdGlvbi5vbmVycm9yID0gKGV2ZW50KSA9PiB7DQoJCQkJY29uc29sZS5sb2coYEl0J3MgZXJyb3IhICR7ZXZlbnQuZXJyb3J9YCk7DQoJCQkJdGhpcy5jb3VudF9lcnJvciArPSAxOw0KCQkJCWlmICh0aGlzLmNvdW50X2Vycm9yID4gMTAwKSB0aGlzLnJlY29nbml0aW9uLm9uZW5kID0gKCkgPT4gdGhpcy5yZWNvZ25pdGlvbi5zdG9wKCk7DQoJCQl9Ow0KCQkJLy8gdGhpcy5yZWNvZ25pdGlvbi5vbmVuZCA9ICgpID0+IHRoaXMucmVjb2duaXRpb24uc3RhcnQoKTsNCg0KCQkJdGhpcy5jb3VudF9lcnJvciA9IDA7DQoJCQl0aGlzLnJlY29nbml0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3VsdCcsIChldmVudCkgPT4gew0KCQkJCWNvbnN0IGxhc3QgPSBldmVudC5yZXN1bHRzLmxlbmd0aCAtIDE7DQoJCQkJY29uc3Qgc2F5V29yZCA9IGV2ZW50LnJlc3VsdHNbbGFzdF1bMF0udHJhbnNjcmlwdC50b0xvd2VyQ2FzZSgpOw0KCQkJCWNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7DQoJCQkJcC5jbGFzc05hbWUgPSAnYmxhY2sgd2hpdGUtLXRleHQnOw0KCQkJCXAucmVmID0gYHNwZWVjaCR7dGhpcy5zdGVwfWA7DQoJCQkJcC50ZXh0Q29udGVudCA9IHNheVdvcmQ7DQoJCQkJdGhpcy4kcmVmcy5jaGF0LmFwcGVuZChwKTsNCgkJCQkvLyB0aGlzLiRyZWZzLnNwZWVjaC50ZXh0Q29udGVudCA9IHNheVdvcmQ7DQoJCQkJdGhpcy5yZWNvZ25pdGlvbi5vbmVuZCA9ICgpID0+IHRoaXMucmVjb2duaXRpb24uc3RvcCgpOw0KCQkJfSk7DQoJCQl0aGlzLnJlY29nbml0aW9uLnN0YXJ0KCk7DQoJCX0sDQoJCXZpZGVvKCkgew0KCQkJaWYgKHRoaXMuc3RlcCA+PSA0KSByZXR1cm47DQoJCQl0aGlzLiRyZWZzLnZpZGVvLnBsYXkoKTsNCgkJCXRoaXMuJHJlZnMudmlkZW8ub25lbmRlZCA9ICgpID0+IHsNCgkJCQl0aGlzLnNwZWFrKCk7DQoJCQkJdGhpcy5hbnN3ZXIoKTsNCgkJCQl0aGlzLnN0ZXAgKz0gMTsNCgkJCQljb25zb2xlLmxvZyh0aGlzLnN0ZXApOw0KCQkJCXRoaXMuJHJlZnMuc3JjLnNldEF0dHJpYnV0ZSgnc3JjJywgYC4vYXNzZXRzL3ZpZGVvLyR7dGhpcy5zdGVwfS5tcDRgKTsNCgkJCQl0aGlzLiRyZWZzLnZpZGVvLmxvYWQoKTsNCgkJCX07DQoJCX0sDQoJCWFuc3dlcigpIHsNCgkJCWNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KCQkJZGl2LmNsYXNzTmFtZSA9ICdhbWJlciBkYXJrZW4tNCc7DQoJCQlkaXYucmVmID0gYGFuc3dlciR7dGhpcy5zdGVwfWA7DQoJCQlkaXYudGV4dENvbnRlbnQgPSB0aGlzLmlzQW5zd2VyW3RoaXMuc3RlcF07DQoJCQl0aGlzLiRyZWZzLmNoYXQuYXBwZW5kKGRpdik7DQoJCX0sDQoJfSwNCn07DQo="},{"version":3,"sources":["GameSpeaking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GameSpeaking.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"pug\">\r\n\tdiv( class=\"game\" )\r\n\r\n\t\tv-row( class=\"main\" )\r\n\t\t\tv-col\r\n\t\t\t\tvideo(\r\n\t\t\t\t\tclass=\"main__image\"\r\n\t\t\t\t\tref=\"video\"\r\n\t\t\t\t)\r\n\t\t\t\t\tsource(\r\n\t\t\t\t\t\tref=\"src\"\r\n\t\t\t\t\t\t:src=\"`./assets/video/${this.step}.mp4`\"\r\n\t\t\t\t\t\ttype=\"video/mp4\"\r\n\t\t\t\t\t)\r\n\t\t\t\tv-btn(\r\n\t\t\t\t\t@click=\"video()\"\r\n\t\t\t\t\ttile\r\n\t\t\t\t\tblock\r\n\t\t\t\t) Начать разговор\r\n\r\n\t\t\tv-col(\r\n\t\t\t\tclass=\"indigo lighten-4\"\r\n\t\t\t\tref=\"chat\"\r\n\t\t\t) Чат\r\n\t\t\t\tdiv(\r\n\t\t\t\t\tclass=\"amber darken-4\"\r\n\t\t\t\t\tref=\"answer\"\r\n\t\t\t\t)\r\n\t\t\t\tp(\r\n\t\t\t\t\tclass=''\r\n\t\t\t\t\tref=\"speech\"\r\n\t\t\t\t)\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations, mapActions } from 'vuex';\r\n\r\n/**\r\n * API Vue\r\n * https://ru.vuejs.org/v2/api/index.html\r\n */\r\nexport default {\r\n\tname: 'Speaking',\r\n\tcomponents: {},\r\n\tprops: [],\r\n\tdata: () => ({\r\n\t\tstep: 0,\r\n\t\tstatus: '',\r\n\t\tisAnswer: ['Yes, actually I am lost! How did you know?', '1', '2', '3'],\r\n\t\tvideoIsEnded: false,\r\n\t\tcount_error: 0,\r\n\t\trecognition: '',\r\n\t}),\r\n\tcomputed: {\r\n\t\t...mapGetters({\r\n\t\t\twords: 'getWords',\r\n\t\t\turlFiles: 'getUrlFiles',\r\n\t\t\tgetShortStatistics: 'showShortStatistics',\r\n\t\t}),\r\n\t},\r\n\twatch: {\r\n\t\t// videoIsEnded() {\r\n\t\t// \tthis.speak();\r\n\t\t// \tthis.answer();\r\n\t\t// \tthis.videoIsEnded = false;\r\n\t\t// \tthis.step += 1;\r\n\t\t// \tconsole.log(this.step);\r\n\t\t// \tthis.$refs.src.setAttribute('src', `./assets/video/${this.step}.mp4`);\r\n\t\t// \tthis.$refs.video.load();\r\n\t\t// },\r\n\t},\r\n\tcreated() {},\r\n\tmounted() {\r\n\t\t// Перед началом игры изменим стиль страницы\r\n\t\tthis.appHtml([\r\n\t\t\t// свернем меню\r\n\t\t\t{ one: 'main', key: 'drawer', value: false },\r\n\t\t\t// Уберем хлебные крошки\r\n\t\t\t{ one: 'main', key: 'breadcrumbs', value: false },\r\n\t\t\t{ one: 'main', key: 'background', value: 'indigo lighten-5' },\r\n\t\t\t// Изменим цвет header по таблице цветов\r\n\t\t\t// https://vuetifyjs.com/en/styles/colors/#sass-color-pack\r\n\t\t\t{ one: 'app', key: 'background', value: 'indigo darken-4' },\r\n\t\t\t// Изменим цвет текста на белый в header\r\n\t\t\t{ one: 'app', key: 'colorWhite', value: true },\r\n\t\t]);\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\t// Перед закрытием страницы возращаем настройки обратно\r\n\t\tthis.appHtml([\r\n\t\t\t{ one: 'main', key: 'drawer', value: true },\r\n\t\t\t{ one: 'main', key: 'breadcrumbs', value: true },\r\n\t\t\t{ one: 'main', key: 'background', value: '' },\r\n\t\t\t{ one: 'app', key: 'background', value: 'grey lighten-5' },\r\n\t\t\t{ one: 'app', key: 'colorWhite', value: false },\r\n\t\t]);\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations({\r\n\t\t\tappHtml: 'EDIT_HTML',\r\n\t\t\toffStatistics: 'SHOW_SHORT_STATISTICS',\r\n\t\t}),\r\n\t\t...mapActions({\r\n\t\t\tgetWords: 'APP_GET_USER_WORDS_AGGREGATED',\r\n\t\t\talert: 'ALERT',\r\n\t\t}),\r\n\t\tspeak() {\r\n\t\t\tconst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n\t\t\tthis.recognition = new SpeechRecognition();\r\n\t\t\tthis.recognition.lang = 'en-US';\r\n\t\t\tthis.recognition.continuos = false;\r\n\t\t\tthis.recognition.interimResults = false;\r\n\t\t\tthis.recognition.maxAlternatives = 1;\r\n\t\t\tthis.recognition.onerror = (event) => {\r\n\t\t\t\tconsole.log(`It's error! ${event.error}`);\r\n\t\t\t\tthis.count_error += 1;\r\n\t\t\t\tif (this.count_error > 100) this.recognition.onend = () => this.recognition.stop();\r\n\t\t\t};\r\n\t\t\t// this.recognition.onend = () => this.recognition.start();\r\n\r\n\t\t\tthis.count_error = 0;\r\n\t\t\tthis.recognition.addEventListener('result', (event) => {\r\n\t\t\t\tconst last = event.results.length - 1;\r\n\t\t\t\tconst sayWord = event.results[last][0].transcript.toLowerCase();\r\n\t\t\t\tconst p = document.createElement('p');\r\n\t\t\t\tp.className = 'black white--text';\r\n\t\t\t\tp.ref = `speech${this.step}`;\r\n\t\t\t\tp.textContent = sayWord;\r\n\t\t\t\tthis.$refs.chat.append(p);\r\n\t\t\t\t// this.$refs.speech.textContent = sayWord;\r\n\t\t\t\tthis.recognition.onend = () => this.recognition.stop();\r\n\t\t\t});\r\n\t\t\tthis.recognition.start();\r\n\t\t},\r\n\t\tvideo() {\r\n\t\t\tif (this.step >= 4) return;\r\n\t\t\tthis.$refs.video.play();\r\n\t\t\tthis.$refs.video.onended = () => {\r\n\t\t\t\tthis.speak();\r\n\t\t\t\tthis.answer();\r\n\t\t\t\tthis.step += 1;\r\n\t\t\t\tconsole.log(this.step);\r\n\t\t\t\tthis.$refs.src.setAttribute('src', `./assets/video/${this.step}.mp4`);\r\n\t\t\t\tthis.$refs.video.load();\r\n\t\t\t};\r\n\t\t},\r\n\t\tanswer() {\r\n\t\t\tconst div = document.createElement('div');\r\n\t\t\tdiv.className = 'amber darken-4';\r\n\t\t\tdiv.ref = `answer${this.step}`;\r\n\t\t\tdiv.textContent = this.isAnswer[this.step];\r\n\t\t\tthis.$refs.chat.append(div);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.game {\r\n\theight: 100%;\r\n\tpadding: 0 15%;\r\n\tbox-sizing: border-box;\r\n\r\n\tp {\r\n\t\tmargin: 0;\r\n\t}\r\n\r\n\t.main {\r\n\t\theight: 80%;\r\n\r\n\t\t&__image {\r\n\t\t\tpadding: 2% 0;\r\n\t\t\tmax-width: 300px;\r\n\t\t\tdisplay: block;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t}\r\n\r\n\t.answer {\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n</style>\r\n"]}]}