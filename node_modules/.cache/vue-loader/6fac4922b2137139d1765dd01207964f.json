{"remainingRequest":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\components\\GameSpeaking.vue?vue&type=style&index=0&id=7b46a012&lang=scss&scoped=true&","dependencies":[{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\src\\components\\GameSpeaking.vue","mtime":1594840978188},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\RS\\Repositaries\\RS-Lang\\rslang\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmdhbWUgew0KCWhlaWdodDogMTAwJTsNCglwYWRkaW5nOiAwIDE1JTsNCglib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KDQoJcCB7DQoJCW1hcmdpbjogMDsNCgl9DQoNCgkubWFpbiB7DQoJCWhlaWdodDogODAlOw0KDQoJCSZfX2ltYWdlIHsNCgkJCXBhZGRpbmc6IDIlIDA7DQoJCQltYXgtd2lkdGg6IDMwMHB4Ow0KCQkJZGlzcGxheTogYmxvY2s7DQoJCQltYXJnaW46IDAgYXV0bzsNCgkJCWFsaWduLWl0ZW1zOiBjZW50ZXI7DQoJCX0NCgl9DQoNCgkuYW5zd2VyIHsNCgkJZGlzcGxheTogYmxvY2s7DQoJfQ0KfQ0K"},{"version":3,"sources":["GameSpeaking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"GameSpeaking.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"pug\">\r\n\tdiv( class=\"game\" )\r\n\r\n\t\tv-row( class=\"main\" )\r\n\t\t\tv-col\r\n\t\t\t\tvideo(\r\n\t\t\t\t\tclass=\"main__image\"\r\n\t\t\t\t\tref=\"video\"\r\n\t\t\t\t)\r\n\t\t\t\t\tsource(\r\n\t\t\t\t\t\tref=\"src\"\r\n\t\t\t\t\t\t:src=\"`./assets/video/${this.step}.mp4`\"\r\n\t\t\t\t\t\ttype=\"video/mp4\"\r\n\t\t\t\t\t)\r\n\t\t\t\tv-btn(\r\n\t\t\t\t\t@click=\"video()\"\r\n\t\t\t\t\ttile\r\n\t\t\t\t\tblock\r\n\t\t\t\t) Начать разговор\r\n\r\n\t\t\tv-col(\r\n\t\t\t\tclass=\"indigo lighten-4\"\r\n\t\t\t\tref=\"chat\"\r\n\t\t\t) Чат\r\n\t\t\t\tdiv(\r\n\t\t\t\t\tclass=\"amber darken-4\"\r\n\t\t\t\t\tref=\"answer\"\r\n\t\t\t\t)\r\n\t\t\t\tp(\r\n\t\t\t\t\tclass=''\r\n\t\t\t\t\tref=\"speech\"\r\n\t\t\t\t)\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations, mapActions } from 'vuex';\r\n\r\n/**\r\n * API Vue\r\n * https://ru.vuejs.org/v2/api/index.html\r\n */\r\nexport default {\r\n\tname: 'Speaking',\r\n\tcomponents: {},\r\n\tprops: [],\r\n\tdata: () => ({\r\n\t\tstep: 0,\r\n\t\tstatus: '',\r\n\t\tisAnswer: ['Yes, actually I am lost! How did you know?', '1', '2', '3'],\r\n\t\tvideoIsEnded: false,\r\n\t\tcount_error: 0,\r\n\t\trecognition: '',\r\n\t}),\r\n\tcomputed: {\r\n\t\t...mapGetters({\r\n\t\t\twords: 'getWords',\r\n\t\t\turlFiles: 'getUrlFiles',\r\n\t\t\tgetShortStatistics: 'showShortStatistics',\r\n\t\t}),\r\n\t},\r\n\twatch: {\r\n\t\t// videoIsEnded() {\r\n\t\t// \tthis.speak();\r\n\t\t// \tthis.answer();\r\n\t\t// \tthis.videoIsEnded = false;\r\n\t\t// \tthis.step += 1;\r\n\t\t// \tconsole.log(this.step);\r\n\t\t// \tthis.$refs.src.setAttribute('src', `./assets/video/${this.step}.mp4`);\r\n\t\t// \tthis.$refs.video.load();\r\n\t\t// },\r\n\t},\r\n\tcreated() {},\r\n\tmounted() {\r\n\t\t// Перед началом игры изменим стиль страницы\r\n\t\tthis.appHtml([\r\n\t\t\t// свернем меню\r\n\t\t\t{ one: 'main', key: 'drawer', value: false },\r\n\t\t\t// Уберем хлебные крошки\r\n\t\t\t{ one: 'main', key: 'breadcrumbs', value: false },\r\n\t\t\t{ one: 'main', key: 'background', value: 'indigo lighten-5' },\r\n\t\t\t// Изменим цвет header по таблице цветов\r\n\t\t\t// https://vuetifyjs.com/en/styles/colors/#sass-color-pack\r\n\t\t\t{ one: 'app', key: 'background', value: 'indigo darken-4' },\r\n\t\t\t// Изменим цвет текста на белый в header\r\n\t\t\t{ one: 'app', key: 'colorWhite', value: true },\r\n\t\t]);\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\t// Перед закрытием страницы возращаем настройки обратно\r\n\t\tthis.appHtml([\r\n\t\t\t{ one: 'main', key: 'drawer', value: true },\r\n\t\t\t{ one: 'main', key: 'breadcrumbs', value: true },\r\n\t\t\t{ one: 'main', key: 'background', value: '' },\r\n\t\t\t{ one: 'app', key: 'background', value: 'grey lighten-5' },\r\n\t\t\t{ one: 'app', key: 'colorWhite', value: false },\r\n\t\t]);\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations({\r\n\t\t\tappHtml: 'EDIT_HTML',\r\n\t\t\toffStatistics: 'SHOW_SHORT_STATISTICS',\r\n\t\t}),\r\n\t\t...mapActions({\r\n\t\t\tgetWords: 'APP_GET_USER_WORDS_AGGREGATED',\r\n\t\t\talert: 'ALERT',\r\n\t\t}),\r\n\t\tspeak() {\r\n\t\t\tconst SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n\t\t\tthis.recognition = new SpeechRecognition();\r\n\t\t\tthis.recognition.lang = 'en-US';\r\n\t\t\tthis.recognition.continuos = false;\r\n\t\t\tthis.recognition.interimResults = false;\r\n\t\t\tthis.recognition.maxAlternatives = 1;\r\n\t\t\tthis.recognition.onerror = (event) => {\r\n\t\t\t\tconsole.log(`It's error! ${event.error}`);\r\n\t\t\t\tthis.count_error += 1;\r\n\t\t\t\tif (this.count_error > 100) this.recognition.onend = () => this.recognition.stop();\r\n\t\t\t};\r\n\t\t\t// this.recognition.onend = () => this.recognition.start();\r\n\r\n\t\t\tthis.count_error = 0;\r\n\t\t\tthis.recognition.addEventListener('result', (event) => {\r\n\t\t\t\tconst last = event.results.length - 1;\r\n\t\t\t\tconst sayWord = event.results[last][0].transcript.toLowerCase();\r\n\t\t\t\tconst p = document.createElement('p');\r\n\t\t\t\tp.className = 'black white--text';\r\n\t\t\t\tp.ref = `speech${this.step}`;\r\n\t\t\t\tp.textContent = sayWord;\r\n\t\t\t\tthis.$refs.chat.append(p);\r\n\t\t\t\t// this.$refs.speech.textContent = sayWord;\r\n\t\t\t\tthis.recognition.onend = () => this.recognition.stop();\r\n\t\t\t});\r\n\t\t\tthis.recognition.start();\r\n\t\t},\r\n\t\tvideo() {\r\n\t\t\tif (this.step >= 4) return;\r\n\t\t\tthis.$refs.video.play();\r\n\t\t\tthis.$refs.video.onended = () => {\r\n\t\t\t\tthis.speak();\r\n\t\t\t\tthis.answer();\r\n\t\t\t\tthis.step += 1;\r\n\t\t\t\tconsole.log(this.step);\r\n\t\t\t\tthis.$refs.src.setAttribute('src', `./assets/video/${this.step}.mp4`);\r\n\t\t\t\tthis.$refs.video.load();\r\n\t\t\t};\r\n\t\t},\r\n\t\tanswer() {\r\n\t\t\tconst div = document.createElement('div');\r\n\t\t\tdiv.className = 'amber darken-4';\r\n\t\t\tdiv.ref = `answer${this.step}`;\r\n\t\t\tdiv.textContent = this.isAnswer[this.step];\r\n\t\t\tthis.$refs.chat.append(div);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.game {\r\n\theight: 100%;\r\n\tpadding: 0 15%;\r\n\tbox-sizing: border-box;\r\n\r\n\tp {\r\n\t\tmargin: 0;\r\n\t}\r\n\r\n\t.main {\r\n\t\theight: 80%;\r\n\r\n\t\t&__image {\r\n\t\t\tpadding: 2% 0;\r\n\t\t\tmax-width: 300px;\r\n\t\t\tdisplay: block;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t}\r\n\r\n\t.answer {\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n</style>\r\n"]}]}